(function(e){function t(t){for(var i,r,o=t[0],u=t[1],c=t[2],d=0,f=[];d<o.length;d++)r=o[d],Object.prototype.hasOwnProperty.call(n,r)&&n[r]&&f.push(n[r][0]),n[r]=0;for(i in u)Object.prototype.hasOwnProperty.call(u,i)&&(e[i]=u[i]);l&&l(t);while(f.length)f.shift()();return a.push.apply(a,c||[]),s()}function s(){for(var e,t=0;t<a.length;t++){for(var s=a[t],i=!0,o=1;o<s.length;o++){var u=s[o];0!==n[u]&&(i=!1)}i&&(a.splice(t--,1),e=r(r.s=s[0]))}return e}var i={},n={app:0},a=[];function r(t){if(i[t])return i[t].exports;var s=i[t]={i:t,l:!1,exports:{}};return e[t].call(s.exports,s,s.exports,r),s.l=!0,s.exports}r.m=e,r.c=i,r.d=function(e,t,s){r.o(e,t)||Object.defineProperty(e,t,{enumerable:!0,get:s})},r.r=function(e){"undefined"!==typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})},r.t=function(e,t){if(1&t&&(e=r(e)),8&t)return e;if(4&t&&"object"===typeof e&&e&&e.__esModule)return e;var s=Object.create(null);if(r.r(s),Object.defineProperty(s,"default",{enumerable:!0,value:e}),2&t&&"string"!=typeof e)for(var i in e)r.d(s,i,function(t){return e[t]}.bind(null,i));return s},r.n=function(e){var t=e&&e.__esModule?function(){return e["default"]}:function(){return e};return r.d(t,"a",t),t},r.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)},r.p="/";var o=window["webpackJsonp"]=window["webpackJsonp"]||[],u=o.push.bind(o);o.push=t,o=o.slice();for(var c=0;c<o.length;c++)t(o[c]);var l=u;a.push([0,"chunk-vendors"]),s()})({0:function(e,t,s){e.exports=s("56d7")},"01a9":function(e,t,s){"use strict";var i=s("a8ea"),n=s.n(i);n.a},"034f":function(e,t,s){"use strict";var i=s("85ec"),n=s.n(i);n.a},"039a":function(e,t,s){"use strict";var i=s("7174"),n=s.n(i);n.a},"17da":function(e,t,s){},"1be2":function(e,t,s){"use strict";var i=s("faf5"),n=s.n(i);n.a},"1c4b":function(e,t,s){"use strict";var i=s("b155"),n=s.n(i);n.a},"20b8":function(e,t,s){"use strict";var i=s("fb59"),n=s.n(i);n.a},"231f":function(e,t,s){},2497:function(e,t,s){"use strict";var i=s("89f6"),n=s.n(i);n.a},2742:function(e,t,s){},"2b44":function(e,t,s){"use strict";var i=s("17da"),n=s.n(i);n.a},"2c05":function(e,t,s){},"2eb0":function(e,t,s){"use strict";var i=s("2c05"),n=s.n(i);n.a},"328f":function(e,t,s){},"385b":function(e,t,s){},"3a7b":function(e,t,s){},"45dd":function(e,t,s){"use strict";var i=s("328f"),n=s.n(i);n.a},4678:function(e,t,s){var i={"./af":"2bfb","./af.js":"2bfb","./ar":"8e73","./ar-dz":"a356","./ar-dz.js":"a356","./ar-kw":"423e","./ar-kw.js":"423e","./ar-ly":"1cfd","./ar-ly.js":"1cfd","./ar-ma":"0a84","./ar-ma.js":"0a84","./ar-sa":"8230","./ar-sa.js":"8230","./ar-tn":"6d83","./ar-tn.js":"6d83","./ar.js":"8e73","./az":"485c","./az.js":"485c","./be":"1fc1","./be.js":"1fc1","./bg":"84aa","./bg.js":"84aa","./bm":"a7fa","./bm.js":"a7fa","./bn":"9043","./bn.js":"9043","./bo":"d26a","./bo.js":"d26a","./br":"6887","./br.js":"6887","./bs":"2554","./bs.js":"2554","./ca":"d716","./ca.js":"d716","./cs":"3c0d","./cs.js":"3c0d","./cv":"03ec","./cv.js":"03ec","./cy":"9797","./cy.js":"9797","./da":"0f14","./da.js":"0f14","./de":"b469","./de-at":"b3eb","./de-at.js":"b3eb","./de-ch":"bb71","./de-ch.js":"bb71","./de.js":"b469","./dv":"598a","./dv.js":"598a","./el":"8d47","./el.js":"8d47","./en-SG":"cdab","./en-SG.js":"cdab","./en-au":"0e6b","./en-au.js":"0e6b","./en-ca":"3886","./en-ca.js":"3886","./en-gb":"39a6","./en-gb.js":"39a6","./en-ie":"e1d3","./en-ie.js":"e1d3","./en-il":"7333","./en-il.js":"7333","./en-nz":"6f50","./en-nz.js":"6f50","./eo":"65db","./eo.js":"65db","./es":"898b","./es-do":"0a3c","./es-do.js":"0a3c","./es-us":"55c9","./es-us.js":"55c9","./es.js":"898b","./et":"ec18","./et.js":"ec18","./eu":"0ff2","./eu.js":"0ff2","./fa":"8df4","./fa.js":"8df4","./fi":"81e9","./fi.js":"81e9","./fo":"0721","./fo.js":"0721","./fr":"9f26","./fr-ca":"d9f8","./fr-ca.js":"d9f8","./fr-ch":"0e49","./fr-ch.js":"0e49","./fr.js":"9f26","./fy":"7118","./fy.js":"7118","./ga":"5120","./ga.js":"5120","./gd":"f6b4","./gd.js":"f6b4","./gl":"8840","./gl.js":"8840","./gom-latn":"0caa","./gom-latn.js":"0caa","./gu":"e0c5","./gu.js":"e0c5","./he":"c7aa","./he.js":"c7aa","./hi":"dc4d","./hi.js":"dc4d","./hr":"4ba9","./hr.js":"4ba9","./hu":"5b14","./hu.js":"5b14","./hy-am":"d6b6","./hy-am.js":"d6b6","./id":"5038","./id.js":"5038","./is":"0558","./is.js":"0558","./it":"6e98","./it-ch":"6f12","./it-ch.js":"6f12","./it.js":"6e98","./ja":"079e","./ja.js":"079e","./jv":"b540","./jv.js":"b540","./ka":"201b","./ka.js":"201b","./kk":"6d79","./kk.js":"6d79","./km":"e81d","./km.js":"e81d","./kn":"3e92","./kn.js":"3e92","./ko":"22f8","./ko.js":"22f8","./ku":"2421","./ku.js":"2421","./ky":"9609","./ky.js":"9609","./lb":"440c","./lb.js":"440c","./lo":"b29d","./lo.js":"b29d","./lt":"26f9","./lt.js":"26f9","./lv":"b97c","./lv.js":"b97c","./me":"293c","./me.js":"293c","./mi":"688b","./mi.js":"688b","./mk":"6909","./mk.js":"6909","./ml":"02fb","./ml.js":"02fb","./mn":"958b","./mn.js":"958b","./mr":"39bd","./mr.js":"39bd","./ms":"ebe4","./ms-my":"6403","./ms-my.js":"6403","./ms.js":"ebe4","./mt":"1b45","./mt.js":"1b45","./my":"8689","./my.js":"8689","./nb":"6ce3","./nb.js":"6ce3","./ne":"3a39","./ne.js":"3a39","./nl":"facd","./nl-be":"db29","./nl-be.js":"db29","./nl.js":"facd","./nn":"b84c","./nn.js":"b84c","./pa-in":"f3ff","./pa-in.js":"f3ff","./pl":"8d57","./pl.js":"8d57","./pt":"f260","./pt-br":"d2d4","./pt-br.js":"d2d4","./pt.js":"f260","./ro":"972c","./ro.js":"972c","./ru":"957c","./ru.js":"957c","./sd":"6784","./sd.js":"6784","./se":"ffff","./se.js":"ffff","./si":"eda5","./si.js":"eda5","./sk":"7be6","./sk.js":"7be6","./sl":"8155","./sl.js":"8155","./sq":"c8f3","./sq.js":"c8f3","./sr":"cf1e","./sr-cyrl":"13e9","./sr-cyrl.js":"13e9","./sr.js":"cf1e","./ss":"52bd","./ss.js":"52bd","./sv":"5fbd","./sv.js":"5fbd","./sw":"74dc","./sw.js":"74dc","./ta":"3de5","./ta.js":"3de5","./te":"5cbb","./te.js":"5cbb","./tet":"576c","./tet.js":"576c","./tg":"3b1b","./tg.js":"3b1b","./th":"10e8","./th.js":"10e8","./tl-ph":"0f38","./tl-ph.js":"0f38","./tlh":"cf75","./tlh.js":"cf75","./tr":"0e81","./tr.js":"0e81","./tzl":"cf51","./tzl.js":"cf51","./tzm":"c109","./tzm-latn":"b53d","./tzm-latn.js":"b53d","./tzm.js":"c109","./ug-cn":"6117","./ug-cn.js":"6117","./uk":"ada2","./uk.js":"ada2","./ur":"5294","./ur.js":"5294","./uz":"2e8c","./uz-latn":"010e","./uz-latn.js":"010e","./uz.js":"2e8c","./vi":"2921","./vi.js":"2921","./x-pseudo":"fd7e","./x-pseudo.js":"fd7e","./yo":"7f33","./yo.js":"7f33","./zh-cn":"5c3a","./zh-cn.js":"5c3a","./zh-hk":"49ab","./zh-hk.js":"49ab","./zh-tw":"90ea","./zh-tw.js":"90ea"};function n(e){var t=a(e);return s(t)}function a(e){if(!s.o(i,e)){var t=new Error("Cannot find module '"+e+"'");throw t.code="MODULE_NOT_FOUND",t}return i[e]}n.keys=function(){return Object.keys(i)},n.resolve=a,e.exports=n,n.id="4678"},4906:function(e,t,s){},"49be":function(e,t,s){"use strict";var i=s("abf8"),n=s.n(i);n.a},"4bc9":function(e,t,s){"use strict";var i=s("3a7b"),n=s.n(i);n.a},5116:function(e,t,s){e.exports=s.p+"img/leaderboard-crown.d1fd4998.svg"},"56c9":function(e,t,s){"use strict";var i=s("2742"),n=s.n(i);n.a},"56d7":function(e,t,s){"use strict";s.r(t);s("e260"),s("e6cf"),s("cca6"),s("a79d");var i=s("a026"),n=s("8aa5"),a=s.n(n),r=function(){var e=this,t=e.$createElement,i=e._self._c||t;return i("div",{attrs:{id:"app"}},[i("div",{staticClass:"content"},[e.betaMode?i("div",{staticClass:"corner-ribbon bottom-right sticky blue"},[e._v(" Beta ")]):e._e(),i("b-navbar",{directives:[{name:"show",rawName:"v-show",value:!1,expression:"false"}],attrs:{toggleable:"md",type:"dark",variant:e.navbarVariant}},[i("b-navbar-toggle",{attrs:{target:"nav_collapse"}}),i("b-navbar-brand",{attrs:{to:"/",id:"brandName"}},[e._v(e._s(e.brandName))]),i("b-collapse",{attrs:{"is-nav":"",id:"nav_collapse"}},[i("b-navbar-nav",{attrs:{id:"navLinks"}},[i("b-nav-item",{attrs:{to:{name:"Home",query:e.routerQuery},exact:""}},[e._v("Home")]),i("b-nav-item",{attrs:{to:{name:"Leaderboard",query:e.routerQuery}}},[e._v("Leaderboard")]),i("b-nav-item",{attrs:{to:{name:"Play",query:e.routerQuery}}},[e._v("Play")]),i("b-nav-item",{attrs:{to:{name:"Chats",query:e.routerQuery}}},[e._v("Chats")]),e.needsTutorial?i("b-nav-item",{attrs:{to:{name:"Tutorial",query:e.routerQuery}}},[e._v("Tutorial")]):e._e(),e.userData.admin?i("b-nav-item",{attrs:{to:{name:"Admin",query:e.routerQuery}}},[e._v("Admin")]):e._e()],1),i("b-navbar-nav",{staticClass:"ml-auto"},[e.userIsDefined?i("b-nav-item-dropdown",{attrs:{right:""}},[i("template",{slot:"button-content"},[i("em",[e._v(e._s(e.userInfo.displayName))])]),i("b-dropdown-item",{attrs:{to:{name:"Profile",query:e.routerQuery}}},[e._v("Profile")]),i("b-dropdown-item",{on:{click:e.logout}},[e._v("Signout")])],2):i("b-nav-item",{attrs:{to:{name:"Login",query:e.routerQuery}}},[e._v("Login")]),e.userIsDefined?i("b-nav-text",[e.currentLevel.img?i("b-img",{staticClass:"m-1",attrs:{rounded:"circle",width:"20",height:"20",alt:"img",src:e.currentLevel.img}}):e._e(),e._v(" "+e._s(e.userData.score)+" ")],1):e._e()],1)],1)],1),i("nav",[i("ul",{staticClass:"navRoot"},[i("li",{staticClass:"navSection main-logo"},[i("router-link",{attrs:{to:"/"}},[i("img",{attrs:{src:s("b81c"),alt:"Swipes for Science logo"}})])],1),i("li",{staticClass:"navSection mobile-menu"},[i("SliderMenu",{attrs:{needsTutorial:!1,isAdmin:!1}})],1),i("li",{staticClass:"navSection account-details"},[i("AccountMenu",{attrs:{userInfo:e.userInfo,userData:e.userData,loggedIn:e.userIsDefined},on:{logout:e.logout}})],1),i("li",{staticClass:"navSection desktop-menu"})])]),i("div",{staticClass:"router"},[i("router-view",{attrs:{userInfo:e.userInfo,userData:e.userData,allUsers:e.allUsers,levels:e.levels,currentLevel:e.currentLevel,config:e.config,db:e.db,routerQuery:e.routerQuery},on:{taken_tutorial:e.setTutorial}})],1),e.showConfig?i("Configure",{ref:"configurationPane",attrs:{config:e.config,userInfo:e.userInfo,db:e.db,configurationState:e.configurationState},on:{closeConfig:e.closeConfig}}):e._e()],1),i("Footer",{attrs:{config:e.config,routerQuery:e.routerQuery},on:{openConfig:e.openConfig}})],1)},o=[],u=(s("d81d"),s("b64b"),s("ac1f"),s("5319"),s("5f5b")),c=s("bc3a"),l=s.n(c),d=s("5f30"),f=s.n(d),m=s("2ef0"),p=s.n(m),h=(s("f9e3"),s("2dd8"),s("1f54"),s("fa6d"),s("6924"),s("f8e9"),s("9f9f"),{needsTutorial:!0,manifestUrl:"https://swipes-for-testing.s3-ap-southeast-1.amazonaws.com/weddingphotos.json",manifestType:"json",widgetType:"ImageSwipe",widgetProperties:{baseUrlTemplate:"https://swipes-for-testing.s3-ap-southeast-1.amazonaws.com/{0}.jpg",delimiter:"__",leftSwipeLabel:"Fail",rightSwipeLabel:"Pass"},iconAttribute:{name:"openmoji",url:"http://openmoji.org"},levels:{0:{level:0,min:0,max:100,character:null,img:null,img_grey:null},1:{level:1,min:101,max:350,character:"fish",img:"https://raw.githubusercontent.com/hfg-gmuend/openmoji/master/color/svg/1F41F.svg?sanitize=true",img_grey:"https://raw.githubusercontent.com/hfg-gmuend/openmoji/master/black/svg/1F41F.svg?sanitize=true"},2:{level:2,min:351,max:750,character:"frog",img:"https://raw.githubusercontent.com/hfg-gmuend/openmoji/master/color/svg/1F438.svg?sanitize=true",img_grey:"https://raw.githubusercontent.com/hfg-gmuend/openmoji/master/black/svg/1F438.svg?sanitize=true"},3:{level:3,min:751,max:1e3,character:"duck",img:"https://raw.githubusercontent.com/hfg-gmuend/openmoji/master/color/svg/1F986.svg?sanitize=true",img_grey:"https://raw.githubusercontent.com/hfg-gmuend/openmoji/master/black/svg/1F986.svg?sanitize=true"},4:{level:4,min:1001,max:1500,character:"koala",img:"https://raw.githubusercontent.com/hfg-gmuend/openmoji/master/color/svg/1F428.svg?sanitize=true",img_grey:"https://raw.githubusercontent.com/hfg-gmuend/openmoji/master/black/svg/1F428.svg?sanitize=true"},5:{level:5,min:1501,max:2e3,character:"cat",img:"https://raw.githubusercontent.com/hfg-gmuend/openmoji/master/color/svg/1F408.svg?sanitize=true",img_grey:"https://raw.githubusercontent.com/hfg-gmuend/openmoji/master/black/svg/1F408.svg?sanitize=true"},6:{level:6,min:2001,max:2500,character:"lion",img:"https://raw.githubusercontent.com/hfg-gmuend/openmoji/master/color/svg/1F981.svg?sanitize=true",img_grey:"https://raw.githubusercontent.com/hfg-gmuend/openmoji/master/black/svg/1F981.svg?sanitize=true"}},betaMode:!1,firebaseKeys:{apiKey:"AIzaSyCsr7ZaI-M9A5PMjLOnqFhxJhClU9Scg1k",authDomain:"swipes-for-testing.firebaseapp.com",databaseURL:"https://swipes-for-testing.firebaseio.com",projectId:"swipes-for-testing",storageBucket:"swipes-for-testing.appspot.com",messagingSenderId:"952931606450"},app:{navbarVariant:"info"},home:{title:"Swipes for Science",tagline:"A citizen science game template",backgroundUrl:"https://raw.githubusercontent.com/SwipesForScience/testConfig/master/images/SwipesForScience.svg?sanitize=true"},play:{blankImage:"https://raw.githubusercontent.com/SwipesForScience/testConfig/master/images/undraw_blank_canvas.svg?sanitize=true"},chats:{blankImage:"https://raw.githubusercontent.com/SwipesForScience/testConfig/master/images/undraw_no_data.svg?sanitize=true"},profile:{blankImage:"https://raw.githubusercontent.com/SwipesForScience/testConfig/master/images/undraw_chatting.svg?sanitize=true"},tutorial:{customBackgroundAnimation:"Bubbles",steps:{intro:[{text:"here is an example tutorial step",image:"https://upload.wikimedia.org/wikipedia/commons/8/8b/Humpback_whales_in_singing_position.jpg"},{text:"here is another one.",image:"https://upload.wikimedia.org/wikipedia/commons/d/dd/Hydrophone_being_lowered_into_the_Atlantic.jpg"}],examples:[{text:"swipe right when the image is good quality",pointer:"sub-NDARYX806FL1__cor_184",answer:1,tutorialStep:0},{text:"swipe left when its bad",pointer:"sub-NDAREG590BNY__sag_201",answer:0,tutorialStep:1},{text:"if you're not sure, click 'help' \n to discuss with scientists ",pointer:"sub-NDAREW671HZW__ax_86",answer:0,tutorialStep:2},{text:"Are you ready to play?",tutorialCompleted:!0}]}}}),g=function(){var e=this,t=e.$createElement,s=e._self._c||t;return s("div",{staticClass:"configuration"},[s("div",{style:e.styleContent},[s("h3",[e._v(" Swipes for Science "),s("button",{staticClass:"close",attrs:{type:"button","aria-label":"Close",id:"closeConfigButton"},on:{click:e.close}},[s("span",{attrs:{"aria-hidden":"true"}},[e._v("Ã—")])])]),s("p",{staticClass:"lead"},[e._v("Configuration")]),0===e.step?s("FirebaseKeys",{on:{newFirebaseKeys:e.setNewFirebaseKeys}}):e._e(),1===e.step&&0===Object.keys(e.userInfo).length?s("div",[s("b-alert",{attrs:{show:""}},[e._v(" Thanks for your keys! Follow the steps on the video above: ")]),s("video",{staticClass:"video",attrs:{src:"https://s3.amazonaws.com/hotdognothotdog/setupAuthAndDatabase.webm",controls:""}}),s("b-alert",{attrs:{show:""}},[e._v(" when you're done, "),s("router-link",{attrs:{to:"/login"}},[e._v("log in")]),e._v(" or "),s("router-link",{attrs:{to:"/signup"}},[e._v("sign up")]),e._v(" to continue with configuration. ")],1)],1):e._e(),1===e.step&&Object.keys(e.userInfo).length?s("div",[null!==e.userInfo.displayName?s("Initializer",{attrs:{config:e.config,userInfo:e.userInfo,db:e.db},on:{next:e.next}}):s("div",[e._v("Hold on... "+e._s(e.userInfo.displayName))])],1):e._e(),2===e.step?s("App",{attrs:{config:e.config}}):e._e(),3===e.step?s("Widget",{attrs:{config:e.config}}):e._e(),4===e.step?s("Home",{attrs:{config:e.config}}):e._e(),5===e.step?s("Tutorial",{attrs:{config:e.config}}):e._e(),6===e.step?s("div",[s("h5",[e._v("Lock down your database!")]),s("p",[e._v("Copy/paste your rules into your firebase console in the 'rules' tab.")]),s("textarea",{staticClass:"codeBlock",attrs:{disabled:"",rows:"15"},domProps:{value:e.rules}}),s("br"),s("b-button",{attrs:{variant:"primary"}},[e._v("Copy to clipboard")])],1):e._e(),7===e.step?s("div",[s("p",[e._v(" 1. Download your config file. ")]),s("b-button",{staticClass:"mb-3",attrs:{variant:"primary"},on:{click:e.downloadConfig}},[e._v("Download")]),s("p",[e._v(" 2. Upload your config file to the web (e.g S3, GitHub, Gist, etc) ")]),s("p",[e._v(" 3. Copy/paste the public URL to your config here: ")]),s("b-input",{model:{value:e.configURL,callback:function(t){e.configURL=t},expression:"configURL"}})],1):e._e(),8===e.step?s("div",[s("h5",[e._v("Done!")]),s("p",{staticClass:"lead"},[e._v(" The URL to your project is: ")]),s("p",[s("a",{attrs:{href:"https://dev.swipesforscience.org/#/?config="+e.configURL}},[e._v(" https://dev.swipesforscience.org/#/?config="+e._s(e.configURL)+" ")])])]):e._e(),e.step>=2?s("div",{staticClass:"mt-3 pt-3"},[e.step>=3?s("b-button",{attrs:{variant:"secondary"},on:{click:e.prev}},[e._v(" Prev ")]):e._e(),e.step<=7?s("b-button",{attrs:{variant:"secondary",disabled:7===e.step&&!e.configURL},on:{click:e.next}},[e._v(" Next ")]):e._e()],1):e._e()],1),s("div",{style:e.styleResize,attrs:{id:"expander"},on:{mousedown:e.startResize}})])},v=[],b=(s("99af"),function(){var e=this,t=e.$createElement,s=e._self._c||t;return s("div",[s("h5",[e._v("Setting up your database")]),e._m(0),s("video",{staticClass:"video",attrs:{src:"https://s3.amazonaws.com/hotdognothotdog/createFirebaseProject.webm",controls:""}}),s("label",{attrs:{for:"firebase"}},[e._v("Firebase Keys:")]),s("b-textarea",{attrs:{placeholder:"Copy/paste your firebase API keys from the firebase console in here",rows:5},model:{value:e.fkeys,callback:function(t){e.fkeys=t},expression:"fkeys"}}),s("b-button",{staticClass:"mt-2 mb-2",attrs:{variant:"secondary",disabled:!e.fkeys},on:{click:e.parseFirebaseKeys}},[e._v("Apply")])],1)}),y=[function(){var e=this,t=e.$createElement,s=e._self._c||t;return s("ol",{staticClass:"text-left ml-3 pl-3"},[s("li",[e._v(" Create a new Firebase project at "),s("a",{attrs:{href:"https://console.firebase.google.com"}},[e._v("console.firebase.google.com")])]),s("li",[e._v(' Copy the API keys to the text box below and hit "Apply" ')])])}],w=(s("1276"),{data:function(){return{fkeys:null}},methods:{parseFirebaseKeys:function(){var e=this,t=["apiKey","authDomain","databaseURL","projectId","storageBucket","messagingSenderId"],s={};return p.a.map(t,(function(t){s[t]=e.fkeys.split("".concat(t,': "'))[1].split('"')[0]})),this.$emit("newFirebaseKeys",s),s}}}),_=w,S=(s("af29"),s("2877")),C=Object(S["a"])(_,b,y,!1,null,"5b15f801",null),k=C.exports,j=function(){var e=this,t=e.$createElement,s=e._self._c||t;return s("div",[s("h5",[e._v("App")]),s("label",{attrs:{for:"manifestUrl"}},[e._v("manifestUrl")]),s("b-form-input",{attrs:{type:"text",id:"manifestUrl"},model:{value:e.config.manifestUrl,callback:function(t){e.$set(e.config,"manifestUrl",t)},expression:"config.manifestUrl"}})],1)},x=[],P={props:{config:{type:Object,required:!0}},data:function(){return{}},methods:{},mounted:function(){this.$router&&this.$router.replace("/admin")}},I=P,O=Object(S["a"])(I,j,x,!1,null,null,null),L=O.exports,T=function(){var e=this,t=e.$createElement,s=e._self._c||t;return s("div",[s("h5",{staticClass:"mt3 pt-3"},[e._v("Home")]),s("label",{attrs:{for:"navbarVariant"}},[e._v("Navbar variant:")]),s("b-form-select",{staticClass:"mb-3",attrs:{id:"navbarVariant",options:e.navbarOptions},model:{value:e.config.app.navbarVariant,callback:function(t){e.$set(e.config.app,"navbarVariant",t)},expression:"config.app.navbarVariant"}}),s("label",{attrs:{for:"title"}},[e._v("Title")]),s("b-form-input",{attrs:{type:"text",id:"title",placeholder:"your title here"},model:{value:e.config.home.title,callback:function(t){e.$set(e.config.home,"title",t)},expression:"config.home.title"}}),s("label",{staticClass:"mt-2",attrs:{for:"tagline"}},[e._v("Tagline")]),s("b-form-input",{attrs:{type:"text",id:"tagline",placeholder:"your tagline here"},model:{value:e.config.home.tagline,callback:function(t){e.$set(e.config.home,"tagline",t)},expression:"config.home.tagline"}}),s("label",{staticClass:"mt-2",attrs:{for:"backgroundUrl"}},[e._v("Background URL")]),s("b-form-input",{attrs:{type:"text",id:"backgroundUrl",placeholder:"url to a picture"},model:{value:e.config.home.backgroundUrl,callback:function(t){e.$set(e.config.home,"backgroundUrl",t)},expression:"config.home.backgroundUrl"}})],1)},q=[],$={props:{config:{type:Object,required:!0}},data:function(){return{navbarOptions:["primary","secondary","info","warning","danger"]}},mounted:function(){this.$router&&this.$router.replace("/")}},U=$,E=Object(S["a"])(U,T,q,!1,null,null,null),A=E.exports,M=function(){var e=this,t=e.$createElement,s=e._self._c||t;return s("div",[s("h5",{staticClass:"mt3 pt-3"},[e._v("Tutorial")]),s("div",{staticClass:"form-check"},[s("input",{directives:[{name:"model",rawName:"v-model",value:e.config.needsTutorial,expression:"config.needsTutorial"}],staticClass:"form-check-input",attrs:{type:"checkbox",id:"defaultCheck1"},domProps:{checked:Array.isArray(e.config.needsTutorial)?e._i(e.config.needsTutorial,null)>-1:e.config.needsTutorial},on:{change:function(t){var s=e.config.needsTutorial,i=t.target,n=!!i.checked;if(Array.isArray(s)){var a=null,r=e._i(s,a);i.checked?r<0&&e.$set(e.config,"needsTutorial",s.concat([a])):r>-1&&e.$set(e.config,"needsTutorial",s.slice(0,r).concat(s.slice(r+1)))}else e.$set(e.config,"needsTutorial",n)}}}),s("label",{staticClass:"form-check-label",attrs:{for:"defaultCheck1"}},[e._v(" Needs a tutorial? ")])])])},N=[],z={props:{config:{type:Object,required:!0}}},D=z,F=Object(S["a"])(D,M,N,!1,null,null,null),R=F.exports,B=function(){var e=this,t=e.$createElement,s=e._self._c||t;return s("div",[s("h5",{staticClass:"mt3 pt-3"},[e._v("Widget")]),s("b-form-select",{staticClass:"mb-3",attrs:{id:"navbarVariant",options:e.widgetOptions},model:{value:e.config.widgetType,callback:function(t){e.$set(e.config,"widgetType",t)},expression:"config.widgetType"}}),s("h5",{staticClass:"mt3 pt-3"},[e._v("Widget Properties")]),e._l(e.widgetSchema,(function(t,i){return s("div",{key:i,staticClass:"mt-2"},[s("label",{attrs:{for:i}},[e._v(e._s(i))]),""===t.type()?s("div",[s("b-form-input",{attrs:{type:"text",id:i,placeholder:t.default},model:{value:e.config.widgetProperties[i],callback:function(t){e.$set(e.config.widgetProperties,i,t)},expression:"config.widgetProperties[key]"}})],1):Array.isArray(t.type())?s("div",[s("b-alert",{attrs:{show:"",variant:e.danger}},[e._v("Not implemented yet!")])],1):e._e()])}))],2)},H=[],Q=function(){var e=this,t=e.$createElement,s=e._self._c||t;return s("div",{staticClass:"imageSwipe"},[s("transition",{key:e.swipe,attrs:{name:e.swipe}},[s("div",{key:e.baseUrl,staticClass:"user-card"},[s("div",{staticClass:"image_area"},[s("progressive-img",{directives:[{name:"hammer",rawName:"v-hammer:swipe.horizontal",value:e.onSwipe,expression:"onSwipe",arg:"swipe",modifiers:{horizontal:!0}}],staticClass:"user-card__picture mx-auto",attrs:{src:e.baseUrl,placeholder:"https://unsplash.it/500","aspect-ratio":1}})],1),s("div",{staticClass:"user-card__name"},[e.playMode?s("b-button",{directives:[{name:"shortkey",rawName:"v-shortkey",value:["arrowleft"],expression:"['arrowleft']"},{name:"hammer",rawName:"v-hammer:swipe.left",value:e.swipeLeft,expression:"swipeLeft",arg:"swipe",modifiers:{left:!0}}],ref:"leftSwipe",staticStyle:{float:"left"},attrs:{variant:"danger"},on:{click:e.swipeLeft,shortkey:e.swipeLeft}},[s("i",{staticClass:"fa fa-long-arrow-left",attrs:{"aria-hidden":"true"}}),e._v(" "+e._s(e.widgetProperties.leftSwipeLabel)+" ")]):s("span",{staticStyle:{float:"left"}},[e.widgetSummary?s("span",[e._v(" ave vote: "+e._s(e.widgetSummary.aveVote||0)+" ")]):s("span",[e._v("ave vote: N/A")])]),e.playMode?s("b-button",{ref:"helpButton",staticClass:"helpbtn",attrs:{to:"/review/"+e.widgetPointer}},[e._v("Help")]):e._e(),e.playMode?s("b-button",{directives:[{name:"shortkey",rawName:"v-shortkey",value:["arrowright"],expression:"['arrowright']"}],ref:"rightSwipe",staticStyle:{float:"right"},attrs:{variant:"success"},on:{click:e.swipeRight,shortkey:e.swipeRight}},[e._v(" "+e._s(e.widgetProperties.rightSwipeLabel)+" "),s("i",{staticClass:"fa fa-long-arrow-right",attrs:{"aria-hidden":"true"}})]):s("span",{staticStyle:{float:"right"}},[e.widgetSummary?s("span",[e._v(" num votes: "+e._s(e.widgetSummary.count||0)+" ")]):s("span",[e._v("num votes: 0")])])],1)])])],1)},V=[],G=(s("a9e3"),s("6591")),W=s("8ff0"),K=s.n(W),Y=s("8a5d"),J=s("9076"),Z=s.n(J);i["default"].use(Z.a),i["default"].use(G["VueHammer"]),i["default"].use(s("3717"));var X={name:"ImageSwipe",props:{widgetPointer:{type:String,required:!0},widgetProperties:{type:Object,required:!0},widgetSummary:{type:Object,required:!1},userSettings:{type:Object,required:!0},playMode:{type:String,required:!1},tutorialStep:{type:Number,required:!1}},components:{VueHammer:G["VueHammer"],GridLoader:Y["a"]},directives:{imagesLoaded:K.a},data:function(){return{status:"loading",swipe:null}},computed:{baseUrl:function(){return this.widgetProperties.baseUrlTemplate&&this.widgetPointer?this.fillPropertyPattern(this.widgetProperties.baseUrlTemplate,this.widgetProperties.delimiter):null}},mounted:function(){var e=this;this.$nextTick((function(){"tutorial"===e.playMode&&e.showTutorialStep(e.tutorialStep)}))},methods:{showTutorialStep:function(e){switch(e){case 0:this.$refs.rightSwipe.classList.add("focus");break;case 1:this.$refs.leftSwipe.classList.add("focus");break;case 2:this.$refs.helpButton.classList.add("focus");break;default:break}},fillPropertyPattern:function(e,t){var s=e,i=String(this.widgetPointer).split(t);return p.a.map(i,(function(e,t){s=s.replace("{".concat(t,"}"),e)})),s},getScore:function(e){var t=this.getFeedback(e);return"danger"===t.variant?0:1},getFeedback:function(e){var t;if(t=this.widgetSummary?this.widgetSummary:{count:0},t.count>4){var s=t.aveVote;return s>=.7&&!e?{show:!1,variant:"danger",message:"+0 most people swiped right"}:s<=.3&&e?{show:!1,variant:"danger",message:"+0 most people swiped left"}:{show:!0,variant:"success",message:"+1 good job"}}return{show:!0,variant:"success",message:"+1 thanks"}},getSummary:function(e){if(!this.widgetSummary)return{aveVote:e,count:1};var t=this.widgetSummary.aveVote*this.widgetSummary.count+e;return t/=this.widgetSummary.count+1,{aveVote:t,count:this.widgetSummary.count+1}},vote:function(e){this.$emit("widgetRating",e)},getPropertiesSchema:function(){return{baseUrlTemplate:{type:String,required:!0,description:"base url to the image file"},delimiter:{type:String,required:!1,default:"__",description:"how to split the sample ID to fill in the template"},leftSwipeLabel:{type:String,required:!1,default:"Fail",description:"label for the left swipe button"},rightSwipeLabel:{type:String,required:!1,default:"True",description:"label for the right swipe button"}}},swipeLeft:function(){this.setSwipe("swipe-left"),this.vote(0)},swipeRight:function(){this.setSwipe("swipe-right"),this.vote(1)},onSwipe:function(e){2===e.direction?this.swipeLeft():this.swipeRight()},setSwipe:function(e){this.swipe=e},test:function(){return this.getScore(1),this.getScore(0),this.getFeedback(1),this.getFeedback(0),this.getSummary(1),this.getSummary(0),this.vote(1),"play"===this.playMode&&(this.showTutorialStep(0),this.showTutorialStep(1),this.showTutorialStep(2)),this.swipeLeft(),this.swipeRight(),this.onSwipe({direction:1}),this.onSwipe({direction:2}),this.setSwipe("swipe-left"),this.getPropertiesSchema(),1}}},ee=X,te=(s("2b44"),Object(S["a"])(ee,Q,V,!1,null,"afe4d442",null)),se=te.exports,ie=function(){var e=this,t=e.$createElement,s=e._self._c||t;return s("div",{staticClass:"widgetTemplate"},[s("p",{staticClass:"lead mb-3 pb-3 mt-3 pt-3"},[e._v(e._s(e.widgetPointer))]),e.playMode?e._e():s("p",{staticClass:"mb-3 pb-3 mt-3 pt-3"},[e._v(e._s(e.widgetSummary))]),e.playMode?s("div",{staticClass:"row"},[s("b-btn",{staticClass:"mx-auto ml-3 mr-3",attrs:{variant:"danger"},on:{click:function(t){return e.vote(0)}}},[e._v("Vote No")]),s("b-btn",{staticClass:"mx-auto ml-3 mr-3",attrs:{variant:"info",to:"/review/"+e.widgetPointer}},[e._v("Help")]),s("b-btn",{staticClass:"mx-auto ml-3 mr-3",attrs:{variant:"success"},on:{click:function(t){return e.vote(1)}}},[e._v("Vote Yes")])],1):e._e()])},ne=[],ae={name:"TemplateWidget",props:{widgetPointer:{type:String,required:!0},widgetProperties:{type:Object,required:!0},widgetSummary:{type:Object,required:!1},userSettings:{type:Object,required:!0},playMode:{type:String,required:!1},tutorialStep:{type:Number,required:!1}},data:function(){return{}},methods:{getScore:function(e){return e?1:0},getFeedback:function(e){return e?{show:!0,variant:"success",message:"good job"}:{show:!0,variant:"danger",message:"bad job"}},getSummary:function(e){if(!this.widgetSummary)return{aveVote:e,count:1};var t=this.widgetSummary.aveVote*this.widgetSummary.count+e;return t/=this.widgetSummary.count+1,{aveVote:t,count:this.widgetSummary.count+1}},vote:function(e){this.$emit("widgetRating",e)},getPropertiesSchema:function(){return{}},test:function(){return this.getScore(1),this.getScore(0),this.getFeedback(1),this.getFeedback(0),this.getSummary(1),this.getSummary(0),this.vote(1),this.getPropertiesSchema(),1}}},re=ae,oe=Object(S["a"])(re,ie,ne,!1,null,null,null),ue=oe.exports,ce={props:{config:{type:Object,required:!0}},data:function(){return{widgetOptions:["ImageSwipe"]}},computed:{widgetSchema:function(){var e=this.getWidgetSchema(this.config.widgetType);return e}},methods:{getWidgetSchema:function(e){var t;switch(e){case"ImageSwipe":t=i["default"].extend(se);break;default:t=i["default"].extend(ue);break}var s=new t({propsData:{widgetPointer:"",widgetProperties:{},userSettings:{}}});return s.getPropertiesSchema()}},mounted:function(){this.$router&&this.$router.replace("/play")}},le=ce,de=Object(S["a"])(le,B,H,!1,null,null,null),fe=de.exports,me=function(){var e=this,t=e.$createElement,s=e._self._c||t;return s("div",[s("div",{staticClass:"text-left ml-3 pl-3"},[s("p",[e._v("Admin: "+e._s(e.admin))]),s("p",[e._v("sampleCounts: "+e._s(e.sampleCounts))]),s("p",[e._v("sampleSummary: "+e._s(e.sampleSummary))]),s("p",[e._v("chats: "+e._s(e.chats))]),s("p",[e._v("user seen samples: "+e._s(e.userSeenSamples))]),s("p",[e._v("votes: "+e._s(e.votes))])]),e.ready?s("b-btn",{on:{click:function(t){return e.next()}}},[e._v("Next")]):e._e()],1)},pe=[],he={name:"Initializer",props:{config:{type:Object,required:!0},db:{type:Object,required:!0},userInfo:{type:Object,required:!0}},data:function(){return{admin:!1,sampleCounts:!1,sampleSummary:!1,chats:!1,userSeenSamples:!1,userSettings:!1,votes:!1}},computed:{uid:function(){return this.userInfo.uid},ready:function(){return this.admin&&this.sampleCounts&&this.sampleSummary&&this.chats&&this.userSeenSamples&&this.votes&&this.userSettings}},watch:{ready:function(){this.ready&&this.next()}},mounted:function(){this.initAll()},methods:{initAdmin:function(){var e=this,t=this.userInfo.displayName;this.db.ref("settings").child("admins").child(t).set(1),this.db.ref("users").child(t).child("admin").set(!0).then((function(){e.admin=!0}))},initSampleCounts:function(){var e=this;this.db.ref("sampleCounts").once("value").then((function(t){var s=t.val();null===s&&e.db.ref("sampleCounts").set(0)})).then((function(){e.sampleCounts=!0}))},initSampleSummary:function(){var e=this;this.db.ref("sampleSummary").once("value").then((function(t){var s=t.val();null===s&&e.db.ref("sampleSummary").set(0)})).then((function(){e.sampleSummary=!0}))},initChats:function(){var e=this;this.db.ref("chats").once("value").then((function(t){var s=t.val();null===s&&e.db.ref("chats").set(0)})).then((function(){e.chats=!0}))},initUserSeenSamples:function(){var e=this,t=this.userInfo.displayName;this.db.ref("userSeenSamples").child(t).once("value").then((function(s){var i=s.val();null===i&&e.db.ref("userSeenSamples").child(t).set(0)})).then((function(){e.userSeenSamples=!0}))},initVotes:function(){var e=this;this.db.ref("votes").once("value").then((function(t){var s=t.val();null===s&&e.db.ref("votes").set(0)})).then((function(){e.votes=!0}))},initUserSettings:function(){var e=this;this.db.ref("userSettings").once("value").then((function(t){var s=t.val();null===s&&e.db.ref("userSettings").set(0)})).then((function(){e.userSettings=!0}))},initAll:function(){this.initAdmin(),this.initSampleCounts(),this.initSampleSummary(),this.initChats(),this.initUserSeenSamples(),this.initUserSettings(),this.initVotes()},next:function(){this.$emit("next")}}},ge=he,ve=Object(S["a"])(ge,me,pe,!1,null,null,null),be=ve.exports;function ye(e,t){var s=document.createElement("a");s.setAttribute("href","data:text/plain;charset=utf-8,".concat(encodeURIComponent(t))),s.setAttribute("download",e),s.style.display="none",document.body.appendChild(s),s.click(),document.body.removeChild(s)}var we,_e={name:"configuration",props:{config:{type:Object,required:!0},userInfo:{type:Object,required:!0},db:{type:Object,required:!0},configurationState:{type:Object,required:!0}},data:function(){return{fkeys:null,width:300,resizing:!1,configURL:""}},components:{FirebaseKeys:k,App:L,Home:A,Tutorial:R,Widget:fe,Initializer:be},computed:{styleContent:function(){return{width:"".concat(this.width,"px"),position:"fixed",top:0,"z-index":"9",background:"#ffffffe0",height:"100%",padding:"10px","overflow-y":"scroll"}},styleResize:function(){return{left:"".concat(this.width,"px")}},step:function(){return this.configurationState.step},rules:function(){return'\n      {\n        "rules": {\n          ".read": "auth.uid === \''.concat(this.userInfo.uid,'\'", // replace w/ your UID\n          ".write": "auth.uid === \'').concat(this.userInfo.uid,'\'",// replace w/ your UID\n          "users": {\n            ".read": true,\n            ".write": "auth !== null && data.exists()",\n            "$displayName": {\n              ".read": true,\n              ".write": "$displayName === auth.token.name",\n              "admin": {\n                ".write": "auth.uid === \'').concat(this.userInfo.uid,'\'", // replace w/ your UID\n              }\n            }\n          },\n          "userSettings": {\n            ".read": false,\n            ".write": "auth !== null && data.exists()",\n            "$displayName": {\n              ".read": "$displayName === auth.token.name",\n              ".write": "$displayName === auth.token.name",\n            },\n          },\n          "chats": {\n            ".read": true,\n            ".write": "auth !== null && data.exists()",\n          },\n          "sampleCounts": {\n            ".read": true,\n            ".write": "auth !== null && data.exists()",\n          },\n          "sampleSummary": {\n            ".read": true,\n            ".write": "auth !== null && data.exists()",\n          },\n          "settings": {\n            ".read": true,\n            ".write": "auth.uid === \'').concat(this.userInfo.uid,'\'" // replace w/ your UID\n          },\n          "userSeenSamples": {\n            ".read": true,\n            "$displayName": {\n              ".write": true, // "$displayName === auth.token.name"\n            },\n          },\n          "votes": {\n            ".write": "data.exists()",\n            ".read": "auth !== null",\n          }\n        }\n      }\n      ')}},methods:{update:function(){},startResize:function(){this.resizing=!0},resize:function(e){this.resizing&&(this.width=e.clientX)},endResize:function(){this.resizing=!1},close:function(){this.$emit("closeConfig")},setNewFirebaseKeys:function(e){this.config.firebaseKeys=e,this.configurationState.step=1},next:function(){this.configurationState.step+=1},prev:function(){this.configurationState.step-=1},downloadConfig:function(){ye("config.json",JSON.stringify(this.config,null,2))}},watch:{userInfo:{handler:function(){this.userInfo.displayName&&this.$forceUpdate()},deep:!0}},mounted:function(){window.addEventListener("mousemove",this.resize),window.addEventListener("mouseup",this.endResize),this.config.needsTutorial=!1},beforeDestroy:function(){window.removeEventListener("mousemove",this.resize),window.removeEventListener("mouseup",this.endResize)}},Se=_e,Ce=(s("1c4b"),Object(S["a"])(Se,g,v,!1,null,"242c41f4",null)),ke=Ce.exports,je=function(){var e=this,t=e.$createElement,s=e._self._c||t;return s("div",{staticClass:"slider-menu"},[s("a",{ref:"slider-menu-toggle",staticClass:"slider-menu__toggle",on:{click:function(t){return e.toggleMenu()}}},[s("svg",{staticStyle:{"fill-rule":"evenodd","clip-rule":"evenodd","stroke-linecap":"round"},attrs:{width:"31px",height:"22px",viewBox:"0 0 31 22",version:"1.1",xmlns:"http://www.w3.org/2000/svg","xmlns:xlink":"http://www.w3.org/1999/xlink","xml:space":"preserve","xmlns:serif":"http://www.serif.com/"}},[s("g",{attrs:{transform:"matrix(1,0,0,1,-26.8461,-27.8461)"}},[s("path",{staticStyle:{fill:"none",stroke:"rgb(88,65,171)","stroke-width":"2.5px"},attrs:{d:"M52,33L32,33M47,44L32,44"}})])])]),e.isActive?s("div",{directives:[{name:"click-outside",rawName:"v-click-outside",value:{exclude:["slider-menu-toggle"],handler:"onClose"},expression:"{exclude: ['slider-menu-toggle'], handler: 'onClose'}"}],staticClass:"slider-menu__drawer"},[s("ul",e._l(e.menuItems,(function(t){return s("li",{key:t.name},[s("router-link",{attrs:{to:t.path}},[e._v(e._s(t.name))])],1)})),0)]):e._e()])},xe=[],Pe=(s("4160"),s("159b"),{bind:function(e,t,s){we=function(i){i.stopPropagation();var n=t.value,a=n.handler,r=n.exclude,o=!1;r.forEach((function(e){if(!o){var t=s.context.$refs[e];o=t.contains(i.target)}})),e.contains(i.target)||o||s.context[a]()},document.addEventListener("click",we),document.addEventListener("touchstart",we)},unbind:function(){document.removeEventListener("click",we),document.removeEventListener("touchstart",we)}}),Ie=Pe,Oe={name:"SliderMenu",data:function(){return{isActive:!1,menuItems:[{path:"/",name:"Home"},{path:"/leaderboard",name:"Leaderboard"},{path:"/chats",name:"Chats"},{path:"/play",name:"Play"},{path:"/admin",name:"Admin"},{path:"/tutorial",name:"Tutorial"}]}},props:{needsTutorial:{type:Boolean,required:!0},isAdmin:{type:Boolean,required:!0}},methods:{onClose:function(){this.isActive=!1},toggleMenu:function(){this.isActive=!this.isActive}},directives:{ClickOutside:Ie},watch:{$route:function(){this.isActive=!1}}},Le=Oe,Te=(s("4bc9"),Object(S["a"])(Le,je,xe,!1,null,null,null)),qe=Te.exports,$e=function(){var e=this,t=e.$createElement,i=e._self._c||t;return i("div",{staticClass:"account-menu"},[e.loggedIn?i("div",{ref:"account-menu-toggle",on:{click:e.toggleMenu}},[i("img",{staticClass:"avatar",attrs:{src:s("95a6"),alt:"Profile Avatar"}}),i("div",{staticClass:"account-menu__user-information"},[i("span",{staticClass:"username"},[e._v(e._s(e.userInfo.displayName))]),i("span",{staticClass:"user-score"},[e._v(e._s(e.userData.score))])])]):i("ul",[i("li",[i("router-link",{staticClass:"nav__link",attrs:{to:"/login"}},[i("i",{staticClass:"fa fa-user",attrs:{"aria-hidden":"true"}}),e._v(" Login ")])],1)]),e.isActive?i("div",{directives:[{name:"click-outside",rawName:"v-click-outside",value:{exclude:["account-menu-toggle"],handler:"onClose"},expression:"{ exclude: ['account-menu-toggle'], handler: 'onClose' }"}],staticClass:"account-menu__dropdown"},[i("ul",[i("li",[e._v("Profile")]),i("li",[i("span",{on:{click:e.onClickLogout}},[e._v("Sign out")])])])]):e._e()])},Ue=[],Ee={name:"AccountMenu",data:function(){return{isActive:!1}},props:{loggedIn:{type:Boolean,required:!0},userInfo:{type:Object,required:!0},userData:{type:Object,required:!0}},methods:{onClose:function(){this.isActive=!1},toggleMenu:function(){this.isActive=!this.isActive},onClickLogout:function(){this.$emit("logout")}},directives:{ClickOutside:Ie},watch:{$route:function(){this.isActive=!1}}},Ae=Ee,Me=(s("2497"),Object(S["a"])(Ae,$e,Ue,!1,null,null,null)),Ne=Me.exports,ze=function(){var e=this,t=e.$createElement,i=e._self._c||t;return i("footer",[i("div",{staticClass:"footer__container"},[i("img",{staticClass:"logo",attrs:{src:s("7968"),alt:"eLife logo"}}),i("nav",e._l(e.menuItems,(function(t){return i("router-link",{key:t.name,staticClass:"nav__link",attrs:{to:t.path}},[e._v(e._s(t.name))])})),1),i("div",{staticClass:"configureButton"},[i("b-button",{attrs:{variant:"info"},on:{click:e.openConfig}},[i("i",{staticClass:"fa fa-wrench",attrs:{"aria-hidden":"true"}}),e._v(" Configure ")])],1)])])},De=[],Fe={name:"Footer",props:{config:{type:Object,required:!0},routerQuery:{type:Object,required:!0}},data:function(){return{menuItems:[{path:"/",name:"Home"},{path:"/play",name:"Game"},{path:"/chats",name:"Chat"},{path:"/leaderboard",name:"Leaderboard"},{path:"/about",name:"About"},{path:"/contact",name:"Contact us"}]}},methods:{openConfig:function(e){e.preventDefault(),this.$emit("openConfig")}}},Re=Fe,Be=(s("01a9"),Object(S["a"])(Re,ze,De,!1,null,"13e8c752",null)),He=Be.exports;i["default"].use(f.a),i["default"].use(u["a"]),window.firebase=a.a;var Qe={name:"app",data:function(){return{userInfo:{},db:a.a.database(),config:h,showConfig:!1,allUsers:[],configurationState:{step:0},showHeader:!1}},mounted:function(){this.userInfo=a.a.auth().currentUser;var e=this;a.a.auth().onAuthStateChanged((function(t){e.userInfo=t||{}}))},components:{Configure:ke,Footer:He,SliderMenu:qe,AccountMenu:Ne},firebase:function(){return{allUsers:{source:this.db.ref("/users/").orderByChild("score"),asObject:!0}}},watch:{firebaseKeys:function(e){var t=this;a.a.auth().signOut().then((function(){t.userInfo={},a.a.app().delete().then((function(){a.a.initializeApp(e),t.db=a.a.database(),t.db.ref("/users/").orderByChild("score").on("value",(function(e){t.allUsers=e.val()})),t.userInfo=a.a.auth().currentUser||{};var s=t;a.a.auth().onAuthStateChanged((function(e){s.userInfo=e||{}}))}))}))}},computed:{firebaseKeys:function(){return this.config.firebaseKeys},brandName:function(){return this.config.home.title},betaMode:function(){return this.config.betaMode},needsTutorial:function(){return this.config.needsTutorial},navbarVariant:function(){return this.config.app&&this.config.app.navbarVariant||"info"},userData:function(){var e=this,t={};return null==this.userInfo?t:Object.keys(this.userInfo).length?(p.a.map(this.allUsers,(function(s,i){i===e.userInfo.displayName&&(t=s,t[".key"]=i)})),t):t},levels:function(){return this.config.levels},currentLevel:function(){var e=this,t={};return p.a.mapValues(this.levels,(function(s){e.userData.score>=s.min&&e.userData.score<=s.max&&(t=s)})),t},userIsDefined:function(){return null!=this.userInfo&&!!Object.keys(this.userInfo).length},routerQuery:function(){return this.$route.query}},methods:{logout:function(){var e=this;a.a.auth().signOut().then((function(){e.userInfo={},e.$router.replace("login")}))},setUser:function(e){this.userInfo=e||{}},setTutorial:function(e){this.db.ref("/users/".concat(this.userInfo.displayName)).child("taken_tutorial").set(e),this.$router.replace("play")},openConfig:function(){this.showConfig=!0},closeConfig:function(){this.showConfig=!1}},created:function(){var e=this;this.$route.query.config&&l.a.get(this.$route.query.config).then((function(t){e.config=t.data})).catch((function(){}))}},Ve=Qe,Ge=(s("034f"),Object(S["a"])(Ve,r,o,!1,null,null,null)),We=Ge.exports,Ke=(s("45fc"),s("b0c0"),s("8c4f")),Ye=function(){var e=this,t=e.$createElement,s=e._self._c||t;return s("div",{attrs:{id:"about"}},[s("h1",[e._v(" About ")]),s("b-container",[s("p",[e._v(" You get points for each sample you annotate. ")]),s("p",[e._v(" You can unlock the following animals based on the number of points you have: ")]),s("b-container",{staticClass:"p-4",attrs:{fluid:""}},[s("b-row",e._l(e.levels,(function(t){return t.img?s("b-col",{key:t.level},[s("div",[s("b-img",{staticClass:"pokemon",attrs:{fluid:"",src:t.img_grey,alt:"Thumbnail"}}),s("br"),e._v(" Level "+e._s(t.level)+" "),s("br"),s("span",[e._v(e._s(t.min)+" points")])],1)]):e._e()})),1)],1)],1)],1)},Je=[],Ze={name:"about",data:function(){return{}},props:{levels:{type:Object,required:!1}}},Xe=Ze,et=(s("b8ab"),Object(S["a"])(Xe,Ye,Je,!1,null,null,null)),tt=et.exports,st=function(){var e=this,t=e.$createElement,s=e._self._c||t;return s("div",{attrs:{id:"admin"}},[s("h1",[e._v(" Admin ")]),s("b-container",["complete"==e.status?s("p",{staticClass:"lead"},[e._v("You have "+e._s(e.sampleCounts.length)+" items currently")]):e._e(),"json"===e.manifestType?s("p",[s("b",[e._v("Data Source:")]),s("a",{attrs:{href:e.config.manifestUrl}},[e._v(e._s(e.config.manifestUrl))])]):"pubmed"===e.manifestType?s("p",[s("b",[e._v("Pubmed Query:")]),e._v(" "+e._s(e.config.manifestQuery)+" ")]):"github"===e.manifestType?s("p",[s("b",[e._v("Github User:")]),e._v(" "+e._s(e.config.manifestGitHub.user)+" "),s("br"),s("b",[e._v("Github Repo:")]),e._v(" "+e._s(e.config.manifestGitHub.repo)+" "),s("br"),s("b",[e._v("Github Path:")]),e._v(" "+e._s(e.config.manifestGitHub.path)+" "),s("br")]):"S3"===e.manifestType?s("p",[s("b",[e._v("S3 bucket:")]),e._v(" "+e._s(e.config.manifestS3.bucket)+" "),s("br"),s("b",[e._v("prefix:")]),e._v(" "+e._s(e.config.manifestS3.prefix)+" "),s("br"),s("b",[e._v("delimiter:")]),e._v(" "+e._s(e.config.manifestS3.delimiter)+" "),s("br")]):e._e(),s("b-button",{attrs:{variant:"warning"},on:{click:e.previewManifest}},[s("span",[e._v(" Preview ")])]),e.manifestEntries.length?s("div",{staticClass:"mt-3 pt-3"},["json"===e.manifestType?s("small",[e._v(" Here are a few items in your manifest file. There are "+e._s(e.manifestEntries.length)+" items in total ")]):"pubmed"===e.manifestType?s("small",[e._v(" Here are a few pubmed IDs from your search. There are "+e._s(e.pubmedQueryStore.count)+" items in total. ")]):e._e(),"github"===e.manifestType?s("small",[e._v(" Here are a few items in your manifest file. There are "+e._s(e.manifestEntries.length)+" items in total ")]):e._e(),"S3"===e.manifestType?s("small",[e._v(" Here are a few items in your manifest file. There are "+e._s(e.manifestEntries.length)+" items in total ")]):e._e(),s("textarea",{staticClass:"mt-3 mb-3 ml-3 mr-3 w-100",attrs:{disabled:"",rows:"5"},domProps:{value:e.manifestEntries.slice(0,100)+"..."}})]):e._e(),"complete"==e.status?s("p",{staticClass:"mt-3 pt-3"},[e._v("Click the button below to sync your firebase database with your manifest.")]):e._e(),s("div",{staticClass:"mb-3 pb-3"},["complete"==e.status?s("b-button",{on:{click:e.refreshSamples}},[s("span",[e._v(" Refresh Sample List ")])]):s("div",[s("p",[e._v(e._s(e.status)+" "+e._s(e.progress)+" / "+e._s(e.manifestEntries.length))]),s("b-progress",{staticClass:"mb-2",attrs:{value:e.progress,max:e.manifestEntries.length,variant:"info",striped:""}})],1)],1)],1)],1)},it=[],nt=(s("4de4"),s("c975"),s("ea06")),at=s.n(nt),rt={name:"admin",data:function(){return{status:"loading...",progress:0,manifestEntries:[],sampleCounts:[],pubmedQueryStore:{},continuation:null}},props:{levels:{type:Object,required:!0},config:{type:Object,required:!0},db:{type:Object,required:!0}},mounted:function(){this.addFirebaseListener()},computed:{manifestType:function(){var e=null;return e=this.config.manifestType?this.config.manifestType:"json",e}},methods:{addFirebaseListener:function(){var e=this;this.db.ref("sampleCounts").once("value",(function(t){e.sampleCounts=p.a.map(t.val(),(function(e,t){return{".key":t,".value":e}})),e.status="complete"}))},xmlParser:function(e){var t=new DOMParser,s=t.parseFromString(e,"text/xml");return s},getPubmedQueryPreview:function(){var e=this,t="https://eutils.ncbi.nlm.nih.gov/entrez/eutils/esearch.fcgi",s="".concat(t,"?db=pubmed&term=").concat(encodeURI(this.config.manifestQuery),"&usehistory=y&retmax=100");return l.a.get(s).then((function(t){var s=e.xmlParser(t.data),i=s.getElementsByTagName("WebEnv")[0],n=s.getElementsByTagName("Count")[0],a=s.getElementsByTagName("IdList")[0].children;e.pubmedQueryStore.webEnv=i.innerHTML,e.pubmedQueryStore.count=n.innerHTML,e.manifestEntries=p.a.map(a,(function(e){return e.innerHTML}))}))},getPubmedQueryFull:function(){var e=this,t="https://eutils.ncbi.nlm.nih.gov/entrez/eutils/esearch.fcgi";if(this.pubmedQueryStore.webEnv){var s="".concat(t,"?db=pubmed&term=").concat(encodeURI(this.config.manifestQuery),"&usehistory=y&retmax=").concat(this.pubmedQueryStore.count,"&WebEnv=").concat(this.pubmedQueryStore.webEnv);l.a.get(s).then((function(t){var s=e.xmlParser(t.data),i=s.getElementsByTagName("IdList")[0].children;e.manifestEntries=p.a.map(i,(function(e){return e.innerHTML})),e.syncEntries()}))}else this.getPubmedQueryPreview().then((function(){e.getPubmedQueryFull()}))},getGithubManifest:function(){var e=this,t="https://api.github.com/repos/".concat(this.config.manifestGitHub.user,"/");return t+="".concat(this.config.manifestGitHub.repo,"/contents/").concat(this.config.manifestGitHub.path),l.a.get(t).then((function(t){e.manifestEntries=p.a.map(t.data,(function(e){return e.name.split(".")[0]}))}))},parseS3:function(e){var t=this,s=this.xmlParser(e),i=s.getElementsByTagName("Key"),n=s.getElementsByTagName("NextContinuationToken"),a=s.getElementsByTagName("IsTruncated")[0].innerHTML;this.continuation="true"===a?encodeURIComponent(n[0].innerHTML):null;var r=p.a.map(i,(function(e){return e.innerHTML})),o=p.a.filter(r,(function(e){return e.replace("".concat(t.config.manifestS3.prefix,"/"),"")})),u=p.a.map(o,(function(e){return e.replace("".concat(t.config.manifestS3.prefix,"/"),"").split(".")[0]}));return u},S3Continuation:function(e){var t=this,s="https://s3-us-west-2.amazonaws.com/".concat(this.config.manifestS3.bucket,"/?list-type=2&");return s+="prefix=".concat(this.config.manifestS3.prefix,"/&max-keys=").concat(this.config.manifestS3.max_keys),s+="&delimiter=".concat(this.config.manifestS3.delimiter),s+="&continuation-token=".concat(e),e?l.a.get(s).then((function(e){var s=t.parseS3(e.data);t.manifestEntries=p.a.uniq(t.manifestEntries.concat(s)),t.continuation&&t.S3Continuation(t.continuation)})):0},getS3Manifest:function(){var e=this,t="https://s3-us-west-2.amazonaws.com/".concat(this.config.manifestS3.bucket,"/?list-type=2&");return t+="prefix=".concat(this.config.manifestS3.prefix,"/&max-keys=").concat(this.config.manifestS3.max_keys),t+="&delimiter=".concat(this.config.manifestS3.delimiter),l.a.get(t).then((function(t){var s=e.parseS3(t.data);e.manifestEntries=p.a.uniq(e.manifestEntries.concat(s)),e.continuation&&e.S3Continuation(e.continuation)}))},previewManifest:function(){var e=this;"json"===this.manifestType?l.a.get(this.config.manifestUrl).then((function(t){e.manifestEntries=t.data})):"pubmed"===this.manifestType?this.getPubmedQueryPreview():"github"===this.manifestType?this.getGithubManifest():"S3"===this.manifestType&&this.getS3Manifest()},refreshSamples:function(){var e=this;this.status="refreshing","json"===this.manifestType?l.a.get(this.config.manifestUrl).then((function(t){var s=t.data;e.manifestEntries=s,e.syncEntries()})):"pubmed"===this.manifestType?this.getPubmedQueryFull():"github"===this.manifestType?this.getGithubManifest().then((function(){e.syncEntries()})):"S3"===this.manifestType&&(this.manifestEntries.length?this.syncEntries():(alert("please press the preview button first, and wait to get the final count"),this.status="complete"))},syncEntries:function(){var e=this,t=p.a.map(this.sampleCounts,(function(e){return e[".key"]})),s=this,i=new at.a;i.postMessage([this.manifestEntries,t,s.config.firebaseKeys]),i.onmessage=function(e){s.status="complete","done"===e.data?s.addFirebaseListener():s.progress+=1},p.a.map(t,(function(t){e.manifestEntries.indexOf(t)<0&&e.db.ref("sampleCounts").child(t).remove()}))}}},ot=rt,ut=Object(S["a"])(ot,st,it,!1,null,null,null),ct=ut.exports,lt=function(){var e=this,t=e.$createElement,s=e._self._c||t;return s("div",{staticClass:"home container"},[s("div",{staticClass:"jumbotron landing",style:e.landingStyle},[s("h1",[e._v(e._s(e.title))]),s("p",{staticClass:"lead buttons mt-3"},[e._v(" "+e._s(e.tagline)+" ")]),s("p",{staticClass:"buttons mt-3"},[s("router-link",{staticClass:"btn btn-primary white",attrs:{to:{name:"Play",query:e.routerQuery}}},[e._v(" Play Now ")])],1)])])},dt=[],ft={name:"Home",props:{config:{type:Object,required:!0},routerQuery:{type:Object}},data:function(){return{}},computed:{title:function(){return this.config.home.title},tagline:function(){return this.config.home.tagline},landingStyle:function(){return{"background-image":'url("'.concat(this.config.home.backgroundUrl,'")')}}}},mt=ft,pt=(s("45dd"),Object(S["a"])(mt,lt,dt,!1,null,"a71c4c44",null)),ht=pt.exports,gt=function(){var e=this,t=e.$createElement,s=e._self._c||t;return s("div",{attrs:{id:"profile"}},[s("b-container",{attrs:{fluid:""}},[s("h1",[e.currentLevel.img?s("b-img",{staticClass:"m-1",attrs:{rounded:"circle",width:"75",height:"75","blank-color":"#777",alt:"img",src:e.currentLevel.img}}):e._e(),e._v(" "+e._s(e.userInfo.displayName)+" ")],1),s("p",{staticClass:"lead"},[e._v(" You have "+e._s(e.userData.score)+" points! ")]),s("hr"),s("h3",[e._v("Level "+e._s(e.currentLevel.level))]),s("p",{staticClass:"lead"},[e._v(" Keep playing to unlock the remaining animals! ")]),s("b-container",{staticClass:"p-4",attrs:{fluid:""}},[s("b-row",e._l(e.levels,(function(t){return t.img?s("b-col",{key:t.min},[s("div",[t.level<=e.currentLevel.level?s("b-img",{staticClass:"pokemon",attrs:{fluid:"",src:t.img,alt:"Thumbnail"}}):s("b-img",{staticClass:"pokemon",attrs:{fluid:"",src:t.img_grey,alt:"Thumbnail"}}),s("br"),e._v(" Level "+e._s(t.level)+" "),s("br"),t.level>e.currentLevel.level?s("span",[e._v(e._s(t.min)+" points")]):e._e()],1)]):e._e()})),1)],1),s("hr"),e.chats.length?s("div",[s("h2",[e._v(" Your Chats ")]),s("p",{staticClass:"lead"},[e._v(" Your discussions on specific samples ")]),e._l(e.chats,(function(t){return s("div",{key:t,staticClass:"text-left"},[e.chatInfo[t]?s("div",[s("b-alert",{attrs:{show:e.chatInfo[t].notify}},[s("router-link",{attrs:{to:"/listen/"+t}},[e._v(e._s(t))]),e._v(": "),s("b",[e._v(e._s(e.chatInfo[t].username))]),e._v(" "+e._s(e.chatInfo[t].message)+" ")],1),s("b-alert",{attrs:{show:!e.chatInfo[t].notify,variant:"light"}},[s("router-link",{attrs:{to:"/review/"+t}},[e._v(e._s(t))]),e._v(": "),s("b",[e._v(e._s(e.chatInfo[t].username))]),e._v(" "+e._s(e.chatInfo[t].message)+" ")],1)],1):e._e()])}))],2):s("div",[s("h2",[e._v(" Chats ")]),s("p",{staticClass:"lead"},[e._v(" You haven't said anything yet! When you're ready, join the discussion. ")]),s("img",{staticClass:"blankImage",attrs:{src:e.blankImage}})])],1)],1)},vt=[],bt={name:"profile",data:function(){return{chats:[],chatInfo:{}}},computed:{blankImage:function(){return this.config.profile.blankImage}},props:{userInfo:{type:Object,required:!0},userData:{type:Object,required:!0},levels:{type:Object,required:!0},currentLevel:{type:Object,required:!0},config:{type:Object,required:!0},db:{type:Object,required:!0}},mounted:function(){this.userData[".key"]&&this.getUserChats()},watch:{userData:function(){this.userData[".key"]&&this.getUserChats()},chats:function(){var e=this;this.chats.forEach((function(t){e.db.ref("chats").child("sampleChats").child(t).orderByKey().limitToLast(1).on("value",(function(s){var i=s.val();e.chatInfo[t]=i[Object.keys(i)[0]],e.getNotifications(t),e.$forceUpdate()}))}))}},methods:{getUserChats:function(){var e=this;this.db.ref("chats").child("userChat").child(this.userData[".key"]).on("value",(function(t){var s=t.val();s&&(e.chats=Object.keys(s))}))},getNotifications:function(e){var t=this;this.db.ref("notifications").child(this.userData[".key"]).child(e).on("value",(function(s){s.val()&&(t.chatInfo[e].notify=!0,t.$forceUpdate())}))}}},yt=bt,wt=(s("1be2"),Object(S["a"])(yt,gt,vt,!1,null,null,null)),_t=wt.exports,St=function(){var e=this,t=e.$createElement,s=e._self._c||t;return s("div",{staticClass:"page-content",attrs:{id:"play"}},[e.showReview?s("ReviewPopup",{attrs:{widgetPointer:e.widgetPointer,userInfo:e.userInfo,userData:e.userData,db:e.db},on:{toggleReviewPopup:e.toggleReviewPopup}}):e._e(),s("b-modal",{ref:"levelUp",attrs:{id:"levelUp",title:"You've Levelled Up!","ok-only":""}},[s("div",{staticClass:"my-4"},[s("h3",[e._v("Level "+e._s(e.currentLevel.level))]),s("img",{attrs:{src:e.currentLevel.img,width:"120px",height:"120px"}}),s("p",{staticClass:"lead"},[e._v("You've unlocked: "+e._s(e.currentLevel.character))])])]),s("div",{staticClass:"main"},[s("button",{on:{click:e.toggleReviewPopup}},[s("i",{staticClass:"fa fa-comments"})]),s("b-alert",{staticClass:"toast",attrs:{show:e.dismissCountDown,variant:e.feedback.variant},on:{dismissed:function(t){e.dismissCountdown=0},"dismiss-count-down":e.countDownChanged}},[e._v(" "+e._s(e.feedback.message)+" ")]),e.noData?s("div",[s("h1",[e._v("There is no data in your database!")]),s("p",{staticClass:"lead"},[e._v(" Follow the instructions to set up your SwipesForScience App ")]),s("img",{staticClass:"blankImage",attrs:{src:e.blankImage,alt:"there is no data"}})]):s("div",[e.widgetPointer?s("WidgetSelector",{ref:"widget",attrs:{widgetType:e.widgetType,widgetPointer:e.widgetPointer,widgetProperties:e.widgetProperties,widgetSummary:e.widgetSummary,userSettings:e.userSettings,needsSecret:e.needsSecret,serverSecret:e.serverSecret,playMode:"play"},on:{widgetRating:e.sendWidgetResponse,updateUserSettings:e.updateUserSettings}}):s("div",[s("Flask"),s("p",{staticClass:"mt-3 pt-3 lead"},[e._v("loading...")])],1)],1)],1)],1)},Ct=[],kt=function(){var e=this,t=e.$createElement,s=e._self._c||t;return s("div",{staticClass:"WidgetSelector"},[s("Secret",{attrs:{userSettings:e.userSettings,needsSecret:e.needsSecret,serverSecret:e.serverSecret},on:{updateUserSettings:e.updateUserSettings}},["ImageSwipe"==e.widgetType?s("ImageSwipe",{ref:"ImageSwipe",attrs:{widgetPointer:e.widgetPointer,widgetProperties:e.widgetProperties,widgetSummary:e.widgetSummary,userSettings:e.userSettings,tutorialStep:e.tutorialStep,playMode:e.playMode},on:{widgetRating:e.widgetRating,updateUserSettings:e.updateUserSettings}}):s("TemplateWidget",{ref:"TemplateWidget",attrs:{widgetPointer:e.widgetPointer,widgetProperties:e.widgetProperties,userSettings:e.userSettings,widgetSummary:e.widgetSummary,tutorialStep:e.tutorialStep,playMode:e.playMode},on:{widgetRating:e.widgetRating,updateUserSettings:e.updateUserSettings}})],1)],1)},jt=[],xt=function(){var e=this,t=e.$createElement,s=e._self._c||t;return s("div",{staticClass:"widgetSecret"},[!e.passesSecret&&e.needsSecret?s("div",{staticClass:"mx-auto",attrs:{id:"signupForm"}},[e.userSettings.secret?s("div",[s("b-alert",{attrs:{variant:"danger",show:""}},[e._v(" Oh no! You didn't enter the right secret! Try again. ")])],1):e._e(),s("p",{staticClass:"lead mb-3 pb-3 mt-3 pt-3"},[s("b-form",{on:{submit:e.onSubmit}},[s("b-form-group",{attrs:{id:"secretInputGroup",label:"Secret:","label-for":"secret"}},[s("b-form-input",{attrs:{id:"secret",type:"text",required:"",placeholder:"Enter Secret"},model:{value:e.form.secret,callback:function(t){e.$set(e.form,"secret",t)},expression:"form.secret"}})],1),s("b-button",{attrs:{type:"submit",variant:"primary"},on:{click:e.onSubmit}},[e._v("Submit")])],1)],1)]):e.passesSecret||!e.needsSecret?s("div",[e._t("default")],2):e._e()])},Pt=[],It=s("5530"),Ot={name:"SecretWidget",props:{userSettings:{type:Object,required:!0},needsSecret:{type:Boolean,required:!1,default:!1},serverSecret:{type:String,required:!1}},data:function(){return{form:{secret:null}}},computed:{passesSecret:function(){return this.needsSecret&&this.userSettings.secret?btoa(this.userSettings.secret)===this.serverSecret:!this.needsSecret}},methods:{onSubmit:function(e){e.preventDefault();var t=Object(It["a"])({},this.userSettings);t.secret=this.form.secret,this.$emit("updateUserSettings",t)}}},Lt=Ot,Tt=Object(S["a"])(Lt,xt,Pt,!1,null,null,null),qt=Tt.exports,$t={name:"WidgetSelector",props:{widgetType:{type:String,required:!0},widgetPointer:{type:String,required:!0},widgetProperties:{type:Object,required:!0},userSettings:{type:Object,required:!0},widgetSummary:{type:Object,required:!1},playMode:{type:String,required:!1},tutorialStep:{type:Number,required:!1},needsSecret:{type:Boolean,required:!1},serverSecret:{type:String,required:!1}},components:{ImageSwipe:se,TemplateWidget:ue,Secret:qt},methods:{getFeedback:function(e){return this.$refs[this.widgetType].getFeedback(e)},getScore:function(e){return this.$refs[this.widgetType].getScore(e)},getSummary:function(e){return this.$refs[this.widgetType].getSummary(e)},widgetRating:function(e){this.$emit("widgetRating",e)},updateUserSettings:function(e){this.$emit("updateUserSettings",e)}}},Ut=$t,Et=Object(S["a"])(Ut,kt,jt,!1,null,null,null),At=Et.exports,Mt=function(){var e=this,t=e.$createElement,s=e._self._c||t;return s("div",{attrs:{id:"flask"}},[s("div",{staticClass:"background"}),s("svg",{attrs:{version:"1.1",xmlns:"http://www.w3.org/2000/svg","xmlns:xlink":"http://www.w3.org/1999/xlink",viewBox:"0 0 113 130","xml:space":"preserve"}},[s("g",[s("path",{attrs:{fill:"#FFFFFF",d:"M0,0v130h112.084L111.75,0H0z M94.75,128C71,128,56,128,56,128s-14.873,0-38.623,0s-13.945-19.422-6.33-35.945S40,41.25,40,41.25V3h16h11v38.25c0,0,23.901,34.283,31.517,50.805S118.5,128,94.75,128z"}}),s("path",{attrs:{fill:"none",stroke:"#000000","stroke-width":"3","stroke-miterlimit":"10",d:"M56,127.5c0,0-14.873,0-38.623,0s-13.695-19.172-6.08-35.695C18.912,75.283,40.5,41.25,40.5,41.25V2.5h-9H56h19.5h-8v38.75c0,0,23.651,34.033,31.267,50.555c7.615,16.523,19.733,35.695-4.017,35.695S56,127.5,56,127.5z"}})])]),s("div",{staticClass:"bubble b0"}),s("div",{staticClass:"bubble b1"}),s("div",{staticClass:"bubble b2"}),s("div",{staticClass:"bubble b3"}),s("div",{staticClass:"bubble b4"}),s("div",{staticClass:"bubble b5"}),s("div",{staticClass:"bubble b6"}),s("div",{staticClass:"bubble b7"}),s("div",{staticClass:"bubble b8"}),s("div",{staticClass:"bubble b9"}),s("div",{staticClass:"swirl s0"}),s("div",{staticClass:"swirl s1"}),s("div",{staticClass:"swirl s2"}),s("div",{staticClass:"swirl s3"}),s("div",{staticClass:"swirl s4"}),s("div",{staticClass:"swirl s5"})])},Nt=[],zt={name:"flask"},Dt=zt,Ft=(s("49be"),Object(S["a"])(Dt,Mt,Nt,!1,null,"5ce0d404",null)),Rt=Ft.exports,Bt=function(){var e=this,t=e.$createElement,s=e._self._c||t;return s("div",{staticClass:"review-popup"},[s("ReviewConversation",{attrs:{widgetPointer:e.widgetPointer,userInfo:e.userInfo,db:e.db},scopedSlots:e._u([{key:"button",fn:function(){return[s("button",{staticClass:"back-button",on:{click:e.togglePopup}},[s("i",{staticClass:"fa fa-angle-left"}),e._v(" Back to gameplay ")])]},proxy:!0}])})],1)},Ht=[],Qt=function(){var e=this,t=e.$createElement,s=e._self._c||t;return s("div",[s("div",{staticClass:"page__content-container review__header dashed-border"},[e._t("button",[s("router-link",{attrs:{to:"/play"}},[s("button",{staticClass:"back-button"},[s("i",{staticClass:"fa fa-angle-left"}),e._v(" Back to gameplay ")])])])],2),s("div",{staticClass:"page-content grey-gradient-bg mobile-no-bg",attrs:{id:"review"}},[s("div",{staticClass:"page__content-container"},[s("header",{staticClass:"dashed-border"},[s("SampleAvatar"),s("h2",[e._v("Conversation about "+e._s(e.widgetPointer))]),e._v(" "+e._s(e.chats)+" ")],1),e.chatOrder.length>0?s("div",{staticClass:"review-history"},e._l(e.chatOrder,(function(t){var i;return s("div",{key:t.time,staticClass:"review-message",class:(i={},i["own-message"]=t.username===e.userInfo.displayName,i)},[s("div",{staticClass:"review-message-date"},[e._v(e._s(t.formattedDate))]),s("div",{staticClass:"review-message-text"},[t.username!==e.userInfo.displayName?s("strong",[e._v(e._s(t.username)+" : ")]):e._e(),e._v(e._s(t.message)+" ")])])})),0):s("div",[s("p",[e._v("No one has said anything yet!")])]),s("form",{staticClass:"review-form",on:{submit:e.sendChat}},[s("input",{directives:[{name:"model",rawName:"v-model",value:e.chatMessage,expression:"chatMessage"}],attrs:{type:"text",placeholder:"Type a message",required:""},domProps:{value:e.chatMessage},on:{input:function(t){t.target.composing||(e.chatMessage=t.target.value)}}}),s("button",{on:{click:e.sendChat}},[s("i",{staticClass:"fa fa-paper-plane"})])])])])])},Vt=[],Gt=(s("07ac"),s("c1df")),Wt=s.n(Gt),Kt=function(){var e=this,t=e.$createElement,s=e._self._c||t;return s("div",[s("svg",{staticStyle:{"fill-rule":"evenodd","clip-rule":"evenodd","stroke-linejoin":"round","stroke-miterlimit":"2",filter:"drop-shadow(rgba(14,30,37,.16) 0px 0px 10px)"},attrs:{width:"100%",height:"100%",viewBox:"0 0 226 255",version:"1.1",xmlns:"http://www.w3.org/2000/svg","xmlns:xlink":"http://www.w3.org/1999/xlink","xml:space":"preserve","xmlns:serif":"http://www.serif.com/"}},[s("defs",[s("linearGradient",{attrs:{id:"defaultGradient",gradientTransform:"rotate(90)"}},[s("stop",{attrs:{offset:"5%","stop-color":"#6846b7"}}),s("stop",{attrs:{offset:"95%","stop-color":"#7b4bc7"}})],1)],1),s("g",{attrs:{transform:"matrix(1,0,0,1,0,-2.5)"}},[s("path",{staticStyle:{fill:"white","fill-rule":"nonzero"},attrs:{d:"M103.923,5C109.697,1.667 115.47,1.667 121.244,5L216.506,60C222.28,63.333 225.167,68.333 225.167,75L225.167,185C225.167,191.667 222.28,196.667 216.506,200L121.244,255C115.47,258.333 109.697,258.333 103.923,255L8.66,200C2.887,196.667 0,191.667 0,185L0,75C0,68.333 2.887,63.333 8.66,60L103.923,5Z"}}),s("g",{attrs:{transform:"matrix(0.823928,0,0,0.823928,19.8228,22.8894)"}},[s("path",{staticStyle:{"fill-rule":"nonzero"},attrs:{fill:"url('#defaultGradient')",d:"M103.923,5C109.697,1.667 115.47,1.667 121.244,5L216.506,60C222.28,63.333 225.167,68.333 225.167,75L225.167,185C225.167,191.667 222.28,196.667 216.506,200L121.244,255C115.47,258.333 109.697,258.333 103.923,255L8.66,200C2.887,196.667 0,191.667 0,185L0,75C0,68.333 2.887,63.333 8.66,60L103.923,5Z"}})])])])])},Yt=[],Jt={name:"SampleAvatar"},Zt=Jt,Xt=(s("20b8"),Object(S["a"])(Zt,Kt,Yt,!1,null,"b5c6ecca",null)),es=Xt.exports,ts={name:"ReviewConversation",props:{widgetPointer:{type:String,required:!0},userInfo:{type:Object,required:!0},db:{type:Object,required:!0},chats:{type:Object,required:!1}},components:{SampleAvatar:es},data:function(){return{userSettings:{},chatMessage:"",chatHistory:[]}},computed:{chatOrder:function(){return this.chatHistory?Object.values(this.chatHistory).map((function(e){return Object(It["a"])({formattedDate:Wt()(e.time).format("dddd, D MMM YYYY, LT")},e)})):[]}},mounted:function(){this.setSampleInfo()},methods:{sendChat:function(e){var t=this;e.preventDefault(),this.db.ref("chats").child("sampleChats").child(this.widgetPointer).push({username:this.userInfo.displayName,message:this.chatMessage,time:(new Date).toISOString()}),this.db.ref("chats").child("sampleChatIndex").child(this.widgetPointer).set({time:(new Date).toISOString()}),this.db.ref("chats").child("userChat").child(this.userInfo.displayName).child(this.widgetPointer).set({watch:1}),this.chatMessage="";var s=[];this.chatOrder.forEach((function(e){s.indexOf(e.username)<0&&e.username!==t.userInfo.displayName&&s.push(e.username)})),s.forEach((function(e){t.db.ref("chats").child("userNotifications").child(e).child(t.widgetPointer).set(!0)}))},unravelFirebaseListObject:function(e){var t=[];return p.a.mapValues(e,(function(e){t.push(e)})),t},setSampleInfo:function(){var e=this;this.db.ref("chats").child("sampleChats").child(this.widgetPointer).on("value",(function(t){var s=t.val();e.chatHistory=s})),this.userInfo.displayName&&this.db.ref("userSettings").child(this.userInfo.displayName).once("value").then((function(t){e.userSettings=t.val()||{}})),this.db.ref("sampleSummary").child(this.widgetPointer).on("value",(function(t){e.widgetSummary=t.val()}))}},watch:{widgetPointer:function(){this.setSampleInfo()}}},ss=ts,is=(s("8fb9"),Object(S["a"])(ss,Qt,Vt,!1,null,"5e740960",null)),ns=is.exports,as={name:"ReviewPopup",components:{ReviewConversation:ns},props:{widgetPointer:{type:String,required:!0},userInfo:{type:Object,required:!0},db:{type:Object,required:!0}},methods:{togglePopup:function(){this.$emit("toggleReviewPopup")}}},rs=as,os=(s("6ad5"),Object(S["a"])(rs,Bt,Ht,!1,null,"b3fe1db0",null)),us=os.exports;i["default"].component("WidgetSelector",At);var cs={name:"play",props:{userInfo:{type:Object,required:!0},userData:{type:Object,required:!0},levels:{type:Object,required:!0},currentLevel:{type:Object,required:!0},config:{type:Object,required:!0},db:{type:Object,required:!0}},data:function(){return{startTime:null,dismissSecs:1,dismissCountDown:0,feedback:{variant:"warning",message:""},status:"loading",sampleCounts:[],userSeenSamples:[],noData:!1,widgetPointer:null,widgetSummary:{},userSettings:{},serverSecret:"",showReview:!1}},watch:{currentLevel:function(){this.userData.score===this.currentLevel.min&&this.currentLevel.min&&(this.$refs.levelUp.show(),this.db.ref("/users/".concat(this.userInfo.displayName)).child("level").set(this.currentLevel.level))},widgetPointer:function(){var e=this;this.widgetPointer&&this.db.ref("sampleSummary").child(this.widgetPointer).once("value",(function(t){e.widgetSummary=t.val()}))}},mounted:function(){this.initSampleCounts(),this.initSeenSamples(),this.initUserSettings(),this.fetchServerSecret()},components:{Flask:Rt,ReviewPopup:us},computed:{samplePriority:function(){return p.a.sortBy(this.sampleCounts,".value")},blankImage:function(){return this.config.play.blankImage},widgetType:function(){return this.config.widgetType},widgetProperties:function(){return this.config.widgetProperties},needsSecret:function(){return this.config.widgetUsesSecret}},methods:{initUserSettings:function(){var e=this;this.db.ref("userSettings").child(this.userInfo.displayName).on("value",(function(t){var s=t.val();e.userSettings=null==s?{}:s}))},updateUserSettings:function(e){e&&this.db.ref("userSettings").child(this.userInfo.displayName).set(e)},initSampleCounts:function(){var e=this;this.db.ref("sampleCounts").once("value",(function(t){e.sampleCounts=p.a.map(t.val(),(function(e,t){return{".key":t,".value":e}})),e.sampleCounts.length?(e.startTime=new Date,e.setNextSampleId()):e.noData=!0}))},initSeenSamples:function(){var e=this;this.db.ref("userSeenSamples").child(this.userInfo.displayName).once("value",(function(t){e.userSeenSamples=p.a.map(t.val(),(function(e,t){return{".key":t,".value":e}}))}))},shuffle:function(e){var t,s,i=e.length;while(0!==i)s=Math.floor(Math.random()*i),i-=1,t=e[i],e[i]=e[s],e[s]=t;return e},sampleUserPriority:function(){if(this.userInfo){var e;if(this.userSeenSamples){var t=p.a.map(this.userSeenSamples,(function(e){return e[".key"]}));e=p.a.filter(this.samplePriority,(function(e){return t.indexOf(e[".key"])<0})),e=e.length?e:this.samplePriority}else e=this.samplePriority;if(e.length){var s=e[0][".value"],i=p.a.filter(e,(function(e){return e[".value"]===s}));return this.shuffle(i)}return this.shuffle(this.samplePriority)}return null},sendWidgetResponse:function(e){var t=this.$refs.widget.getFeedback(e);t.show&&(this.feedback=t,this.showAlert());var s=new Date-this.startTime;this.sendVote(e,s),this.updateScore(this.$refs.widget.getScore(e)),this.updateSummary(this.$refs.widget.getSummary(e)),this.updateCount(),this.updateSeen(),this.setNextSampleId()},setNextSampleId:function(){this.startTime=new Date;var e=this.sampleUserPriority()[0];e&&(this.widgetPointer=e[".key"])},sendVote:function(e,t){this.db.ref("votes").push({user:this.userInfo.displayName,sample:this.widgetPointer,response:e,time:t})},updateScore:function(e){this.db.ref("users").child(this.userInfo.displayName).child("score").transaction((function(t){return(t||0)+e}))},updateSummary:function(e){this.db.ref("sampleSummary").child(this.widgetPointer).set(e)},updateCount:function(){var e=this;this.db.ref("sampleCounts").child(this.widgetPointer).transaction((function(e){return(e||0)+1})),p.a.map(this.sampleCounts,(function(t){t[".key"]===e.widgetPointer&&(t[".value"]+=1)}))},updateSeen:function(){this.db.ref("userSeenSamples").child(this.userInfo.displayName).child(this.widgetPointer).transaction((function(e){return(e||0)+1})),this.userSeenSamples.push({".key":this.widgetPointer,".value":1})},countDownChanged:function(e){this.dismissCountDown=e},showAlert:function(){this.dismissCountDown=this.dismissSecs},fetchServerSecret:function(){var e=this;this.db.ref("settings").child("secret").once("value").then((function(t){e.serverSecret=t.val()}))},toggleReviewPopup:function(){this.showReview=!this.showReview}}},ls=cs,ds=(s("7975"),Object(S["a"])(ls,St,Ct,!1,null,null,null)),fs=ds.exports,ms=function(){var e=this,t=e.$createElement,s=e._self._c||t;return s("div",{attrs:{id:"login"}},[s("h1",[e._v(" Log In ")]),s("div",{staticClass:"container fluid",attrs:{id:"signupForm"}},[s("b-alert",{attrs:{show:e.errors.show,variant:"danger"}},[e._v(e._s(e.errors.message))]),s("b-form",{on:{submit:e.onSubmit}},[s("b-form-group",{attrs:{id:"emailAddressInputGroup",label:"Email address:","label-for":"emailAddress"}},[s("b-form-input",{attrs:{id:"emailAddress",type:"email",required:"",placeholder:"Enter email"},model:{value:e.form.email,callback:function(t){e.$set(e.form,"email",t)},expression:"form.email"}})],1),s("b-form-group",{attrs:{id:"passwordInputGroup",label:"Password:","label-for":"passwordInput"}},[s("b-form-input",{attrs:{id:"passwordInput",type:"password",required:"",placeholder:"Password"},model:{value:e.form.password,callback:function(t){e.$set(e.form,"password",t)},expression:"form.password"}})],1),s("b-button",{attrs:{type:"submit",variant:"primary"}},[e._v("Submit")])],1),s("p",{staticClass:"mt-3"},[e._v(" Don't have an account? "),s("router-link",{attrs:{to:{name:"SignUp",query:e.routerQuery}}},[e._v("Create one")])],1)],1)])},ps=[],hs={name:"login",props:{routerQuery:{type:Object}},data:function(){return{form:{email:null,password:null},errors:{show:!1,message:null}}},methods:{onSubmit:function(e){var t=this;e.preventDefault(),a.a.auth().signInWithEmailAndPassword(this.form.email,this.form.password).then((function(e){t.$emit("login",e),t.$router.push({name:"Play",query:t.routerQuery})}),(function(e){t.errors.show=!0,t.errors.message=e.message}))}}},gs=hs,vs=(s("039a"),Object(S["a"])(gs,ms,ps,!1,null,null,null)),bs=vs.exports,ys=function(){var e=this,t=e.$createElement,s=e._self._c||t;return s("div",{attrs:{id:"signup"}},[s("h1",[e._v("Sign Up")]),s("b-modal",{ref:"consentform",attrs:{id:"consentform",title:"Consent Form",size:"lg"}},[s("terms"),s("div",{staticClass:"w-100",attrs:{slot:"modal-footer"},slot:"modal-footer"},[s("b-form",{on:{submit:e.saveConsent}},[s("b-button",{attrs:{type:"submit",variant:"primary"}},[e._v("I Consent")])],1)],1)],1),s("div",{staticClass:"container fluid",attrs:{id:"signupForm"}},[s("b-form",{attrs:{validated:""},on:{submit:e.onSubmit}},[s("b-alert",{attrs:{show:e.errors.show,variant:"danger"}},[e._v(e._s(e.errors.message))]),s("b-form-group",{attrs:{id:"consentOpenButton",label:e.consentFormLabel,"label-for":"openConsent"}},[e.form.consented?e._e():s("b-button",{attrs:{variant:"success",id:"openConsent"},on:{click:e.openConsentModal}},[e._v(" Open Consent Form ")])],1),s("b-form-group",{attrs:{id:"emailAddressInputGroup",label:"Email address:","label-for":"emailAddress",description:"We'll never share your email with anyone else."}},[s("b-form-input",{attrs:{id:"emailAddress",type:"email",required:"",placeholder:"Enter email"},model:{value:e.form.email,callback:function(t){e.$set(e.form,"email",t)},expression:"form.email"}})],1),s("b-form-group",{attrs:{id:"usernameInputGroup",label:"Username:","label-for":"usernameInput",description:"This will be displayed on the leaderboard"}},[s("b-form-input",{attrs:{id:"usernameInput",type:"text",required:"",placeholder:"Choose a username"},model:{value:e.form.username,callback:function(t){e.$set(e.form,"username",t)},expression:"form.username"}})],1),s("b-form-group",{attrs:{id:"passwordInputGroup",label:"Password:","label-for":"passwordInput"}},[s("b-form-input",{attrs:{id:"passwordInput",type:"password",required:"",placeholder:"Password"},model:{value:e.form.password,callback:function(t){e.$set(e.form,"password",t)},expression:"form.password"}})],1),s("b-form-group",{attrs:{id:"password2InputGroup",label:"Password Again:","label-for":"password2Input"}},[s("b-alert",{attrs:{show:!e.validated,variant:"danger"}},[e._v(" Make sure your passwords match! ")]),s("b-form-input",{attrs:{id:"password2Input",type:"password",required:"",placeholder:"Confirm password"},model:{value:e.form.password2,callback:function(t){e.$set(e.form,"password2",t)},expression:"form.password2"}})],1),s("b-button",{attrs:{type:"submit",variant:"primary",disabled:!e.validated||!e.form.consented}},[e._v("Submit")]),s("p",{staticClass:"mt-3"},[e._v(" Already have an account? "),s("router-link",{attrs:{to:"/login"}},[e._v("Log In")])],1)],1)],1)],1)},ws=[],_s=function(){var e=this,t=e.$createElement,s=e._self._c||t;return s("div",{attrs:{id:"terms"}},[e._v(" Input your terms and conditions (e.g. a consent form) here. ")])},Ss=[],Cs={name:"terms",data:function(){return{}}},ks=Cs,js=Object(S["a"])(ks,_s,Ss,!1,null,null,null),xs=js.exports,Ps={name:"signup",data:function(){return{form:{email:"",password:"",password2:"",username:"",consented:!1},show:!0,errors:{show:!1,message:null}}},props:{config:{type:Object,required:!0}},components:{terms:xs},computed:{validated:function(){return this.form.password===this.form.password2},consentFormLabel:function(){return this.form.consented?"You have consented!":"Click to read and sign the consent form"}},methods:{onSubmit:function(e){var t=this;e.preventDefault(),a.a.database().ref("users").child(this.form.username).once("value").then((function(e){var s=e.val();s?(t.errors.show=!0,t.errors.message="Username already exists! Please choose a unique username"):t.createAccount()}))},saveConsent:function(e){e.preventDefault(),this.form.consented=!0,this.$refs.consentform.hide()},openConsentModal:function(){this.$refs.consentform.show()},createAccount:function(){var e=this;a.a.auth().createUserWithEmailAndPassword(this.form.email,this.form.password).then((function(){var t=a.a.auth().currentUser;e.updateProfile(t)}),(function(t){e.errors.show=!0,e.errors.message=t.message}))},insertUser:function(e){a.a.database().ref("users").child(e.displayName).set({score:0,level:0,admin:!1,taken_tutorial:!1,consent:this.form.consented,consentedOn:new Date}).then((function(){})).catch((function(){}))},updateProfile:function(e){var t=this;e.updateProfile({displayName:this.form.username}).then((function(){t.insertUser(e),t.config.needsTutorial?t.$router.replace("tutorial"):t.$router.replace("play")}),(function(e){t.errors.show=!0,t.errors.message=e.message}))}}},Is=Ps,Os=(s("56c9"),Object(S["a"])(Is,ys,ws,!1,null,null,null)),Ls=Os.exports,Ts=function(){var e=this,t=e.$createElement;e._self._c;return e._m(0)},qs=[function(){var e=this,t=e.$createElement,s=e._self._c||t;return s("div",{attrs:{id:"unauthorized"}},[s("h1",[e._v(" Oops! You are not authorized ")]),s("p",[e._v(" Please contact the sysadmin to get access to this page ")])])}],$s={name:"unauthorized",data:function(){return{}}},Us=$s,Es=Object(S["a"])(Us,Ts,qs,!1,null,null,null),As=Es.exports,Ms=function(){var e=this,t=e.$createElement,i=e._self._c||t;return i("div",{staticClass:"page"},[e._m(0),i("div",{staticClass:"page-content grey-gradient-bg"},[i("div",{staticClass:"page__content-container"},[i("div",{staticClass:"leaderboard"},[i("transition-group",{staticClass:"leaderboard__rows",attrs:{tag:"div",name:"list"}},e._l(e.displayUsersList,(function(t,n){return i("div",{key:t.name,staticClass:"leaderboard__row"},[i("div",{staticClass:"leaderboard__row-container"},[i("div",{staticClass:"leaderboard__cell user-index"},[e._v(e._s(n+1))]),i("div",{staticClass:"leaderboard__cell avatar"},[i("div",{staticClass:"avatar"},[i("img",{attrs:{src:s("95a6"),alt:"Swipes for Science logo"}})])]),i("div",{staticClass:"leaderboard__cell username"},[e._v(e._s(t.name))]),0===n?i("div",{staticClass:"leaderboard__cell crown"},[i("img",{attrs:{src:s("5116"),alt:"Medal"}})]):e._e(),i("div",{staticClass:"leaderboard__cell user-score"},[i("div",[e._v(e._s(t.score))])])]),i("hr",{staticClass:"dashed-decorative-line"})])})),0),e.displayLimit<e.sortedUsersList.length?i("button",{staticClass:"full-size-desktop",attrs:{id:"leaderboard__showMore"},on:{click:function(t){return e.showMore()}}},[e._v(" Load more ")]):e._e()],1)])])])},Ns=[function(){var e=this,t=e.$createElement,s=e._self._c||t;return s("div",{staticClass:"page-title"},[s("h1",[e._v("Leaderboard")])])}],zs=(s("fb6a"),{name:"leaderboard",props:{levels:{type:Object,required:!0},allUsers:{type:Object,required:!0}},computed:{sortedUsersList:function(){var e=this,t=Object.keys(this.allUsers).filter((function(e){return".key"!==e}));return t=t.map((function(t){return{name:t,score:e.allUsers[t].score}})),t.sort((function(e,t){return t.score-e.score})),t},displayUsersList:function(){return this.sortedUsersList.slice(0,this.displayLimit)}},data:function(){return{sortBy:"score",sortDesc:!0,fields:["rank","badge",{key:".key",label:"Player",sortable:!1},{key:"score",label:"Score",sortable:!0}],displayLimit:10}},methods:{showMore:function(){this.displayLimit=this.displayLimit<this.sortedUsersList.length?Math.min(this.displayLimit+10,this.sortedUsersList.length):this.displayLimit}}}),Ds=zs,Fs=(s("2eb0"),Object(S["a"])(Ds,Ms,Ns,!1,null,"536a4f9e",null)),Rs=Fs.exports,Bs=function(){var e=this,t=e.$createElement,s=e._self._c||t;return s("div",{ref:"tutorial",staticClass:"tutorial"},["Bubbles"==e.backgroundAnimation?s("Bubbles"):e._e(),e._m(0),e.currentBin.bin?s("div",{staticClass:"pbar pt-3 pb-3"},[s("b-progress",{staticClass:"ml-3 mr-3",attrs:{value:e.scrollPosition,max:1,"show-progress":""}})],1):e._e(),e._l(e.steps.intro,(function(t,i){return s("div",{staticClass:"fullpage"},[s("div",{attrs:{id:"intro"+i}},[s("p",{domProps:{innerHTML:e._s(t.text)}}),s("span",{staticClass:"invisible"},[e._v(e._s(t.text))])]),s("img",{staticClass:"mt-3 pt-3 img",attrs:{src:t.image}})])})),e._l(e.steps.examples,(function(t,i){return s("div",{staticClass:"fullpage"},[s("div",{staticClass:"text-center message w-100",attrs:{id:"example"+i}},[s("p",{domProps:{innerHTML:e._s(t.text)}}),s("span",{staticClass:"invisible"},[e._v(e._s(t.text))]),t.pointer?s("div",{staticClass:"mt-3"},[s("WidgetSelector",{ref:"widget",refInFor:!0,attrs:{widgetType:e.widgetType,widgetPointer:t.pointer,widgetProperties:e.widgetProperties,widgetSummary:e.widgetSummary,playMode:"tutorial",userSettings:e.userSettings,tutorialStep:t.tutorialStep}})],1):e._e(),t.tutorialCompleted?s("div",[s("b-button",{staticClass:"mt-3",on:{click:e.tutorialComplete}},[e._v("Play now")])],1):e._e()])])})),e.bins.length-1!=e.currentBin.bin?s("div",{directives:[{name:"scroll-to",rawName:"v-scroll-to",value:e.nextStep,expression:"nextStep"}]},[s("Arrow")],1):e._e(),s("p")],2)},Hs=[function(){var e=this,t=e.$createElement,s=e._self._c||t;return s("div",[s("h1",[e._v("Tutorial")]),s("p",{staticClass:"lead"},[e._v("Scroll down to learn how to play")])])}],Qs=function(){var e=this,t=e.$createElement,s=e._self._c||t;return s("svg",{staticClass:"arrows"},[s("path",{staticClass:"a1",attrs:{d:"M0 0 L30 32 L60 0"}}),s("path",{staticClass:"a2",attrs:{d:"M0 20 L30 52 L60 20"}}),s("path",{staticClass:"a3",attrs:{d:"M0 40 L30 72 L60 40"}})])},Vs=[],Gs={name:"Arrow"},Ws=Gs,Ks=(s("6ac8"),Object(S["a"])(Ws,Qs,Vs,!1,null,null,null)),Ys=Ks.exports,Js=function(){var e=this,t=e.$createElement;e._self._c;return e._m(0)},Zs=[function(){var e=this,t=e.$createElement,s=e._self._c||t;return s("div",{staticClass:"bg",attrs:{id:"background-wrap"}},[s("div",{staticClass:"bubble x1"}),s("div",{staticClass:"bubble x2"}),s("div",{staticClass:"bubble x3"}),s("div",{staticClass:"bubble x4"}),s("div",{staticClass:"bubble x5"}),s("div",{staticClass:"bubble x6"}),s("div",{staticClass:"bubble x7"}),s("div",{staticClass:"bubble x8"}),s("div",{staticClass:"bubble x9"}),s("div",{staticClass:"bubble x10"})])}],Xs={name:"bubbles"},ei=Xs,ti=(s("d150"),Object(S["a"])(ei,Js,Zs,!1,null,"b687790e",null)),si=ti.exports,ii=s("f13c");i["default"].use(ii,{container:"body",duration:500,easing:"ease",offset:-75,force:!0,cancelable:!0,onStart:!1,onDone:!1,onCancel:!1,x:!1,y:!0});var ni={name:"tutorial",components:{Arrow:Ys,Bubbles:si,WidgetSelector:At},data:function(){return{scrollPosition:0,widgetSummary:{},userSettings:{}}},props:{levels:{type:Object,required:!0},config:{type:Object,required:!0}},watch:{},computed:{widgetType:function(){return this.config.widgetType},widgetProperties:function(){return this.config.widgetProperties},steps:function(){return this.config.tutorial.steps},backgroundAnimation:function(){return this.config.tutorial.customBackgroundAnimation},bins:function(){for(var e=this.steps.intro.length+this.steps.examples.length,t=1/e,s=[],i=0;i<e;i+=1)s.push({bin:i,from:i*t,to:(i+1)*t});return s},currentBin:function(){var e=this,t=p.a.filter(this.bins,(function(t){return e.scrollPosition<=t.to&&e.scrollPosition>t.from}));return t.length?t[0]:{bin:0}},currentStage:function(){return this.currentBin.bin<this.steps.intro.length?Object(It["a"])(Object(It["a"])({},this.steps.intro[this.currentBin.bin]),{},{mode:"intro"}):Object(It["a"])(Object(It["a"])({},this.steps.examples[this.currentBin.bin-this.steps.intro.length]),{},{mode:"examples"})},nextStep:function(){return this.currentBin.bin<this.steps.intro.length-1?"#intro".concat(this.currentBin.bin+1):"#example".concat(this.currentBin.bin-this.steps.intro.length+1)}},methods:{tutorialComplete:function(){this.$emit("taken_tutorial",!0)},handleScroll:function(){var e=Math.max(document.documentElement.clientHeight,window.innerHeight||0),t=(window.scrollY-60)/(this.$refs.tutorial.clientHeight-e);this.scrollPosition=t<0?0:t>1?1:t}},created:function(){window.addEventListener("scroll",this.handleScroll)},destroyed:function(){window.removeEventListener("scroll",this.handleScroll)}},ai=ni,ri=(s("c061"),Object(S["a"])(ai,Bs,Hs,!1,null,null,null)),oi=ri.exports,ui=function(){var e=this,t=e.$createElement,s=e._self._c||t;return s("div",{staticClass:"review-header"},[s("ReviewConversation",{attrs:{widgetPointer:e.widgetPointer,userInfo:e.userInfo,db:e.db}})],1)},ci=[],li={name:"review",props:{userInfo:{type:Object,required:!0},levels:{type:Object,required:!0},currentLevel:{type:Object,required:!0},config:{type:Object,required:!0},db:{type:Object,required:!0}},components:{ReviewConversation:ns},data:function(){return{widgetPointer:""}},watch:{$route:function(){this.widgetPointer=this.$route.params.key}},mounted:function(){this.widgetPointer=this.$route.params.key}},di=li,fi=Object(S["a"])(di,ui,ci,!1,null,"38610a30",null),mi=fi.exports,pi=function(){var e=this,t=e.$createElement,s=e._self._c||t;return s("div",{staticClass:"page"},[e._m(0),s("div",{staticClass:"page-content grey-gradient-bg"},[s("div",{staticClass:"page__content-container"},[e.noData?s("div",{staticClass:"chat__placeholder"},[s("p",[e._v("No one has said anything yet!")]),s("img",{attrs:{src:e.blankChatImage}})]):s("div",e._l(e.sampleChat,(function(t,i){return s("router-link",{key:i,staticClass:"chat__card",attrs:{to:"/review/"+t[".key"]}},[s("div",{staticClass:"title"},[e._v(e._s(t[".key"]))]),s("div",{staticClass:"chat__message"},[s("span",{staticClass:"username"},[e._v(e._s(e.chatInfo[t[".key"]].username))]),e._v(" : "+e._s(e.chatInfo[t[".key"]].message)+" ")])])})),1)])])])},hi=[function(){var e=this,t=e.$createElement,s=e._self._c||t;return s("div",{staticClass:"page-title"},[s("h1",[e._v("Chats")])])}],gi={firebase:function(){return{sampleChat:{source:this.db.ref("chats").child("sampleChatIndex").orderByChild("time"),readyCallback:function(){var e=this;this.sampleChat.forEach((function(t){e.db.ref("chats").child("sampleChats").child(t[".key"]).orderByKey().limitToLast(1).on("value",(function(s){var i=s.val();e.chatInfo[t[".key"]]=i[Object.keys(i)[0]],e.$forceUpdate()}))})),this.sampleChat.length||(this.noData=!0)}}}},data:function(){return{chatInfo:{},noData:!1}},props:{config:{type:Object,required:!0},db:{type:Object,required:!0}},computed:{orderedPosts:function(){var e=this.sampleChat;return e.reverse()},blankChatImage:function(){return this.config.chats.blankImage}}},vi=gi,bi=(s("672c"),Object(S["a"])(vi,pi,hi,!1,null,"008ff768",null)),yi=bi.exports;i["default"].use(Ke["a"]);var wi=new Ke["a"]({scrollBehavior:function(){return{x:0,y:0}},routes:[{path:"*",redirect:"/login"},{path:"/",name:"Home",component:ht},{path:"/about",name:"About",component:tt},{path:"/profile",name:"Profile",component:_t,meta:{requiresAuth:!0}},{path:"/play",name:"Play",component:fs,meta:{requiresAuth:!0}},{path:"/login",name:"Login",component:bs},{path:"/signup",name:"SignUp",component:Ls},{path:"/terms",name:"Terms",component:xs},{path:"/unauthorized",name:"Unauthorized",component:As},{path:"/leaderboard",name:"Leaderboard",component:Rs},{path:"/tutorial",name:"Tutorial",component:oi},{path:"/chats",name:"Chats",component:yi,meta:{requiresAuth:!0}},{path:"/review/:key",name:"Review",component:mi},{path:"/admin",name:"Admin",component:ct,meta:{requiresAuth:!0,requiresAdmin:!0}}]});wi.beforeEach((function(e,t,s){var i=a.a.auth().currentUser,n=e.matched.some((function(e){return e.meta.requiresAuth})),r=e.matched.some((function(e){return e.meta.requiresAdmin}));n&&!i&&s({path:"/login",query:t.query}),"Play"===e.name&&(i?a.a.database().ref("/users/".concat(i.displayName)).once("value").then((function(e){var i=e.val();!i.taken_tutorial&&h.needsTutorial&&s({path:"/tutorial",query:t.query})})):s({path:"/login",query:t.query})),r?a.a.database().ref("/settings/admins/".concat(i.displayName)).once("value").then((function(e){r&&!e.val()?s("unauthorized"):s()})):s()}));var _i,Si=wi;i["default"].config.productionTip=!1,a.a.initializeApp(h.firebaseKeys),a.a.auth().onAuthStateChanged((function(){_i||(_i=new i["default"]({el:"#app",template:"<App/>",components:{App:We},router:Si}))}))},"672c":function(e,t,s){"use strict";var i=s("8943"),n=s.n(i);n.a},6924:function(e,t,s){},"6ac8":function(e,t,s){"use strict";var i=s("84ac"),n=s.n(i);n.a},"6ad5":function(e,t,s){"use strict";var i=s("385b"),n=s.n(i);n.a},7174:function(e,t,s){},7968:function(e,t,s){e.exports=s.p+"img/eLife-logo.4bb380cb.svg"},7975:function(e,t,s){"use strict";var i=s("231f"),n=s.n(i);n.a},"84ac":function(e,t,s){},"85ec":function(e,t,s){},8943:function(e,t,s){},"89f6":function(e,t,s){},"8fb9":function(e,t,s){"use strict";var i=s("bb4e"),n=s.n(i);n.a},"95a6":function(e,t,s){e.exports=s.p+"img/kesh-profile-icon.13d37edb.svg"},"98e0":function(e,t,s){},"9f9f":function(e,t,s){},a8ea:function(e,t,s){},abf8:function(e,t,s){},af29:function(e,t,s){"use strict";var i=s("fd68"),n=s.n(i);n.a},b155:function(e,t,s){},b81c:function(e,t,s){e.exports=s.p+"img/swipes-for-science-logo.279e7d6c.svg"},b8ab:function(e,t,s){"use strict";var i=s("98e0"),n=s.n(i);n.a},bb4e:function(e,t,s){},c061:function(e,t,s){"use strict";var i=s("4906"),n=s.n(i);n.a},d150:function(e,t,s){"use strict";var i=s("e5c8"),n=s.n(i);n.a},e5c8:function(e,t,s){},ea06:function(e,t,s){e.exports=function(){return new Worker(s.p+"d0268fda84b1b66b74aa.worker.js")}},f8e9:function(e,t,s){},faf5:function(e,t,s){},fb59:function(e,t,s){},fd68:function(e,t,s){}});
//# sourceMappingURL=app.e3867529.js.map